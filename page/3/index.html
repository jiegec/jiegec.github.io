<!DOCTYPE html>
<html>
<head>
    <title>杰哥的{运维,编程,调板子}小笔记</title>

    <meta charset="utf-8">
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
    
    
    

        <meta property="og:title" content="杰哥的{运维,编程,调板子}小笔记" />
    <meta property="og:description" content="" />
    <meta property="og:type" content="website" />
    <meta property="og:locale" content="en" />
    <meta property="og:url" content="https://jiege.ch/" />
    
<link href="https://jiege.ch/feed.xml" rel="alternate" type="application/rss+xml" title="杰哥的{运维,编程,调板子}小笔记" />
    <link rel="shortcut icon" href="/favicon.ico">

    <link href="https://jiege.ch/webfonts/ptserif/main.css" rel='stylesheet' type='text/css'>
    <link href="https://jiege.ch/webfonts/source-code-pro/main.css" rel="stylesheet" type="text/css">

    <link rel="stylesheet" href="https://jiege.ch/css/style.css">
    

    <meta name="generator" content="Hugo 0.67.1" />
</head>

<body>
<div id="container">
    <header id="header">
    <div id="header-outer" class="outer">
        <div id="header-inner" class="inner">
            <a id="main-nav-toggle" class="nav-icon" href="javascript:;"></a>
            <a id="logo" class="logo-text" href="https://jiege.ch/">杰哥的{运维,编程,调板子}小笔记</a>
            <nav id="main-nav">
                
                <a class="main-nav-link" href="/about/">关于</a>
                
                <a class="main-nav-link" href="/category/">分类</a>
                
                <a class="main-nav-link" href="/tools/">工具</a>
                
                <a class="main-nav-link" href="/tags/">标签</a>
                
                <a class="main-nav-link" href="/feed.xml">订阅</a>
                
                <a class="main-nav-link" href="/projects/">项目</a>
                
            </nav>
            <nav id="sub-nav">
                <div id="search-form-wrap">
                </div>
            </nav>
        </div>
    </div>
</header>

    <section id="main" class="outer">
        
        <article class="article article-type-post" itemscope itemprop="blogPost">
            <div class="article-inner">
                
                
                <header class="article-header">
                    <h1 itemprop="name"><a class="article-title" href="/misc/2019/11/17/weekly-sharing-50/">每周分享第 50 期</a></h1>
                </header>
                
                <div class="article-meta">
                    <a href="/misc/2019/11/17/weekly-sharing-50/" class="article-date">
                        <time datetime='2019-11-17T14:04:00.000&#43;08:00' itemprop="datePublished">2019-11-17</time>
                    </a>
                    
                    
                    
                    <div class="article-comment-link-wrap">
                        <a href="/misc/2019/11/17/weekly-sharing-50/#disqus_thread" class="article-comment-link">Comments</a>
                    </div>
                    
                </div>
                <div class="article-entry" itemprop="articleBody">
                    <p>
                        
                    时间过得真快，忽然就 50 期了。。
 CLion 的 C++20 Concept 支持 https://blog.jetbrains.com/clion/2019/11/cpp20-concepts-in-clion/ TypeScript 一些工具 https://github.com/pirix-gh/ts-toolbelt Rust 编写的 SystemVerilog Parser https://github.com/dalance/sv-parser MacBookPro 16英寸 发布 用 Rust 写 eBPF 程序 https://blog.redsift.com/labs/putting-rust-in-the-kernel-with-ebpf/ 终端里玩蜘蛛纸牌 https://github.com/chrisbouchard/klondike-rs Rust 的 coverage 工具 https://github.com/mozilla/grcov 在 Menu Bar 或者 Touch Bar 控制 AirPods Pro 模式 https://github.com/insidegui/NoiseBuddy Demangle Rust 符号的工具 https://github.com/luser/rustfilt  
                    </p>
                    <p class="article-more-link">
                        <a href="/misc/2019/11/17/weekly-sharing-50/">Read More</a>
                    </p>
                </div>

                
                <footer class="article-footer">
                    <ul class="article-tag-list">
                        
                        <li class="article-tag-list-item">
                            <a class="article-tag-list-link" href="https://jiege.ch/tags/weeklysharing">weeklysharing
                            </a>
                        </li>
                        
                    </ul>
                </footer>
                
            </div>
        </article>
        
        <article class="article article-type-post" itemscope itemprop="blogPost">
            <div class="article-inner">
                
                
                <header class="article-header">
                    <h1 itemprop="name"><a class="article-title" href="/programming/2019/11/15/rust-proc-macro-gll/">用 Rust Procedure Macro 实现 GLL Parser</a></h1>
                </header>
                
                <div class="article-meta">
                    <a href="/programming/2019/11/15/rust-proc-macro-gll/" class="article-date">
                        <time datetime='2019-11-15T11:13:00.000&#43;08:00' itemprop="datePublished">2019-11-15</time>
                    </a>
                    
                    
                    
                    <div class="article-comment-link-wrap">
                        <a href="/programming/2019/11/15/rust-proc-macro-gll/#disqus_thread" class="article-comment-link">Comments</a>
                    </div>
                    
                </div>
                <div class="article-entry" itemprop="articleBody">
                    <p>
                        
                    背景 在编译原理课上，PA 框架采用的是 MashPlant/lalr1 ，是一个比较好用的 Lexer + Parser 的工具，它的大概语法见 一个完整的例子 。然后之前看到了 GLL Parser ，想着可不可以照着类似的语法也写一个 GLL 的 Parser Generator ，也是用 Rust Procedure Macro 的方法，就开始了研究。
尝试 首先是阅读 GLL 的论文，它并不长，大概的意思就是，LL(1) 文法需要考虑 PS 冲突的情况，而 GLL 的解决方法就是“都试一下”，然后为了效率，用了 GSS 表示解析过程和 SPPF 表示解析结果。然后就开始照着论文手写了不同版本的实现，见 jiegec/gll-test 。
第一种就是按照论文里第一段实现直接抄过来，每个可能性作为一个 Continuation 存下来，它有自己的栈和执行位置（Label）。这样 Work 以后呢，我又想到了 async/await ，用类似的方法又写了一遍，相对要简洁一些，也是很平常的递归下降的写法，而不是 Loop + Label 的形式。但这些都不能做到合并栈的目的，所以遇到十分有歧义的文法的时候会很糟糕。
然后开始按照论文中的 GSS 进行编写，基本还是按照论文进行翻译，然后一步一步做，做好以后把 GSS 画出来，和论文的图可以对的上；然后照着 GLL parse-tree generation 的论文把 SPPF 实现了，这时候就可以从 recongizer 变成一个 parser 了。
宏 得到一份可行的代码以后，就要扩展到通用的情况上。学习了一下 MashPlant/lalr1 的实现，实现了一个 proc macro，它读取了用户的程序，从一个模板文件开始，往里面插入一些生成的代码，丢给编译器去编译。这时候就涉及到编译期和运行时的不同了，我把运行时一些通用的结构放到了 gll-pg-core 中，把编译期的代码放到了 gll-pg-macros 。
                    </p>
                    <p class="article-more-link">
                        <a href="/programming/2019/11/15/rust-proc-macro-gll/">Read More</a>
                    </p>
                </div>

                
                <footer class="article-footer">
                    <ul class="article-tag-list">
                        
                        <li class="article-tag-list-item">
                            <a class="article-tag-list-link" href="https://jiege.ch/tags/rust">rust
                            </a>
                        </li>
                        
                        <li class="article-tag-list-item">
                            <a class="article-tag-list-link" href="https://jiege.ch/tags/gll">gll
                            </a>
                        </li>
                        
                        <li class="article-tag-list-item">
                            <a class="article-tag-list-link" href="https://jiege.ch/tags/parsing">parsing
                            </a>
                        </li>
                        
                        <li class="article-tag-list-item">
                            <a class="article-tag-list-link" href="https://jiege.ch/tags/parser">parser
                            </a>
                        </li>
                        
                        <li class="article-tag-list-item">
                            <a class="article-tag-list-link" href="https://jiege.ch/tags/metaprogramming">metaprogramming
                            </a>
                        </li>
                        
                    </ul>
                </footer>
                
            </div>
        </article>
        
        <article class="article article-type-post" itemscope itemprop="blogPost">
            <div class="article-inner">
                
                
                <header class="article-header">
                    <h1 itemprop="name"><a class="article-title" href="/misc/2019/11/11/weekly-sharing-49/">每周分享第 49 期</a></h1>
                </header>
                
                <div class="article-meta">
                    <a href="/misc/2019/11/11/weekly-sharing-49/" class="article-date">
                        <time datetime='2019-11-11T17:13:00.000&#43;08:00' itemprop="datePublished">2019-11-11</time>
                    </a>
                    
                    
                    
                    <div class="article-comment-link-wrap">
                        <a href="/misc/2019/11/11/weekly-sharing-49/#disqus_thread" class="article-comment-link">Comments</a>
                    </div>
                    
                </div>
                <div class="article-entry" itemprop="articleBody">
                    <p>
                        
                      libuv wrapper in C++ https://github.com/skypjack/uvw
  Visual Studio Online https://visualstudio.microsoft.com/zh-hans/services/visual-studio-online/
  OpenSSH 的 U2F 支持 https://readhacker.news/s/4carE
  Rust 1.39 Rust 1.39 Released With Async-Await Support, Attributes On Function Parameters
  Windows 也在用 Rust https://msrc-blog.microsoft.com/2019/11/07/using-rust-in-windows/
  用 Chrome Dev Tools 调试 Rust https://twitter.com/ChromeDevTools/status/1192803818024710145
  C++20 的新 Thread 类型 https://medium.com/@vgasparyan1995/a-new-thread-in-c-20-jthread-ebd121ae8906
  
                    </p>
                    <p class="article-more-link">
                        <a href="/misc/2019/11/11/weekly-sharing-49/">Read More</a>
                    </p>
                </div>

                
                <footer class="article-footer">
                    <ul class="article-tag-list">
                        
                        <li class="article-tag-list-item">
                            <a class="article-tag-list-link" href="https://jiege.ch/tags/weeklysharing">weeklysharing
                            </a>
                        </li>
                        
                    </ul>
                </footer>
                
            </div>
        </article>
        
        <article class="article article-type-post" itemscope itemprop="blogPost">
            <div class="article-inner">
                
                
                <header class="article-header">
                    <h1 itemprop="name"><a class="article-title" href="/misc/2019/11/03/weekly-sharing-48/">每周分享第 48 期</a></h1>
                </header>
                
                <div class="article-meta">
                    <a href="/misc/2019/11/03/weekly-sharing-48/" class="article-date">
                        <time datetime='2019-11-03T13:08:00.000&#43;08:00' itemprop="datePublished">2019-11-03</time>
                    </a>
                    
                    
                    
                    <div class="article-comment-link-wrap">
                        <a href="/misc/2019/11/03/weekly-sharing-48/#disqus_thread" class="article-comment-link">Comments</a>
                    </div>
                    
                </div>
                <div class="article-entry" itemprop="articleBody">
                    <p>
                        
                     一个特殊的用于显示数字的字体 https://blog.janestreet.com/commas-in-big-numbers-everywhere/ Intel 的 SPMD 编译器 https://ispc.github.io/ 基于 Scala 的 notebook https://polynote.org/ 解析登机牌信息 https://github.com/georgesmith46/bcbp 常用的 React Hooks 库 https://github.com/streamich/react-use jwt 工具 https://github.com/mike-engel/jwt-cli 用过程宏实现的 delegation in Rust https://github.com/chancancode/rust-delegate  
                    </p>
                    <p class="article-more-link">
                        <a href="/misc/2019/11/03/weekly-sharing-48/">Read More</a>
                    </p>
                </div>

                
                <footer class="article-footer">
                    <ul class="article-tag-list">
                        
                        <li class="article-tag-list-item">
                            <a class="article-tag-list-link" href="https://jiege.ch/tags/weeklysharing">weeklysharing
                            </a>
                        </li>
                        
                    </ul>
                </footer>
                
            </div>
        </article>
        
        <article class="article article-type-post" itemscope itemprop="blogPost">
            <div class="article-inner">
                
                
                <header class="article-header">
                    <h1 itemprop="name"><a class="article-title" href="/misc/2019/10/26/weekly-sharing-47/">每周分享第 47 期</a></h1>
                </header>
                
                <div class="article-meta">
                    <a href="/misc/2019/10/26/weekly-sharing-47/" class="article-date">
                        <time datetime='2019-10-26T20:02:00.000&#43;08:00' itemprop="datePublished">2019-10-26</time>
                    </a>
                    
                    
                    
                    <div class="article-comment-link-wrap">
                        <a href="/misc/2019/10/26/weekly-sharing-47/#disqus_thread" class="article-comment-link">Comments</a>
                    </div>
                    
                </div>
                <div class="article-entry" itemprop="articleBody">
                    <p>
                        
                     CLion 完善了 Rust 调试支持 https://blog.jetbrains.com/clion/2019/10/debugging-rust-code-in-clion/ Nginx HTTP3 的 docker 镜像 https://github.com/RanadeepPolavarapu/docker-nginx-http3 手算 Ed25519 https://dang.fan/zh-Hans/posts/25519 Rust 的 QuickCheck https://github.com/BurntSushi/quickcheck Rust 另一个类似 QuickCheck 的测试框架 https://github.com/AltSysrq/proptest Cookie 策略要改了 https://readhacker.news/s/4bvGG  
                    </p>
                    <p class="article-more-link">
                        <a href="/misc/2019/10/26/weekly-sharing-47/">Read More</a>
                    </p>
                </div>

                
                <footer class="article-footer">
                    <ul class="article-tag-list">
                        
                        <li class="article-tag-list-item">
                            <a class="article-tag-list-link" href="https://jiege.ch/tags/weeklysharing">weeklysharing
                            </a>
                        </li>
                        
                    </ul>
                </footer>
                
            </div>
        </article>
        
        <article class="article article-type-post" itemscope itemprop="blogPost">
            <div class="article-inner">
                
                
                <header class="article-header">
                    <h1 itemprop="name"><a class="article-title" href="/misc/2019/10/19/weekly-sharing-46/">每周分享第 46 期</a></h1>
                </header>
                
                <div class="article-meta">
                    <a href="/misc/2019/10/19/weekly-sharing-46/" class="article-date">
                        <time datetime='2019-10-19T10:21:00.000&#43;08:00' itemprop="datePublished">2019-10-19</time>
                    </a>
                    
                    
                    
                    <div class="article-comment-link-wrap">
                        <a href="/misc/2019/10/19/weekly-sharing-46/#disqus_thread" class="article-comment-link">Comments</a>
                    </div>
                    
                </div>
                <div class="article-entry" itemprop="articleBody">
                    <p>
                        
                     LibC++ 正式支持 WASI https://releases.llvm.org/9.0.0/projects/libcxx/docs/ReleaseNotes.html 从文本反推 regex https://github.com/pemistahl/grex KDE 5.17 发布 https://www.omgubuntu.co.uk/2019/10/kde-plasma-5-17-features IDA 7.4 发布 支持 Py3 https://www.hex-rays.com/products/ida/7.4/index.shtml 新的 CPU Bug https://www.phoronix.com/scan.php?page=news_item&amp;px=Chrome-Geminilake-Bug WAST -&gt; WASM in Rust https://docs.rs/wast/  
                    </p>
                    <p class="article-more-link">
                        <a href="/misc/2019/10/19/weekly-sharing-46/">Read More</a>
                    </p>
                </div>

                
                <footer class="article-footer">
                    <ul class="article-tag-list">
                        
                        <li class="article-tag-list-item">
                            <a class="article-tag-list-link" href="https://jiege.ch/tags/weeklysharing">weeklysharing
                            </a>
                        </li>
                        
                    </ul>
                </footer>
                
            </div>
        </article>
        
        <article class="article article-type-post" itemscope itemprop="blogPost">
            <div class="article-inner">
                
                
                <header class="article-header">
                    <h1 itemprop="name"><a class="article-title" href="/devops/2019/10/19/configure-telegraf-for-cisco-wlc/">为 Cisco WLC 配置 Telegraf</a></h1>
                </header>
                
                <div class="article-meta">
                    <a href="/devops/2019/10/19/configure-telegraf-for-cisco-wlc/" class="article-date">
                        <time datetime='2019-10-19T10:14:00.000&#43;08:00' itemprop="datePublished">2019-10-19</time>
                    </a>
                    
                    
                    
                    <div class="article-comment-link-wrap">
                        <a href="/devops/2019/10/19/configure-telegraf-for-cisco-wlc/#disqus_thread" class="article-comment-link">Comments</a>
                    </div>
                    
                </div>
                <div class="article-entry" itemprop="articleBody">
                    <p>
                        
                    最近想到可以给 Cisco WLC 也配置一下监控，查了一下，果然有一些方法。大概研究了一下，找到了方法：
把 https://github.com/haad/net-snmp/tree/master/mibs 和 https://github.com/zampat/neteye4/tree/master/monitoring/monitoring-plugins/wireless/cisco/mibs 目录下的所有 .txt 文件放到 /usr/share/snmp/mibs 目录下。
然后把 https://github.com/zampat/neteye4/blob/master/monitoring/monitoring-plugins/wireless/cisco/telegraf.conf 下面 snmp 的配置复制到 telegraf 配置中，然后修改一下 IP 地址。
确保 Cisco WLC 的 SNMP 的 Public Community 已经配置好，然后就可以拿到数据了。
目前可以拿到 WLC 自身的一些运行˙状态信息、AP 的信息、SSID 的信息和 Client 的信息，基本满足了我们的需求。
参考：https://www.neteye-blog.com/2019/08/monitoring-a-cisco-wireless-controller/
                    </p>
                    <p class="article-more-link">
                        <a href="/devops/2019/10/19/configure-telegraf-for-cisco-wlc/">Read More</a>
                    </p>
                </div>

                
                <footer class="article-footer">
                    <ul class="article-tag-list">
                        
                        <li class="article-tag-list-item">
                            <a class="article-tag-list-link" href="https://jiege.ch/tags/telegraf">telegraf
                            </a>
                        </li>
                        
                        <li class="article-tag-list-item">
                            <a class="article-tag-list-link" href="https://jiege.ch/tags/cisco">cisco
                            </a>
                        </li>
                        
                        <li class="article-tag-list-item">
                            <a class="article-tag-list-link" href="https://jiege.ch/tags/wlc">wlc
                            </a>
                        </li>
                        
                        <li class="article-tag-list-item">
                            <a class="article-tag-list-link" href="https://jiege.ch/tags/snmp">snmp
                            </a>
                        </li>
                        
                        <li class="article-tag-list-item">
                            <a class="article-tag-list-link" href="https://jiege.ch/tags/mib">mib
                            </a>
                        </li>
                        
                    </ul>
                </footer>
                
            </div>
        </article>
        
        <article class="article article-type-post" itemscope itemprop="blogPost">
            <div class="article-inner">
                
                
                <header class="article-header">
                    <h1 itemprop="name"><a class="article-title" href="/misc/2019/10/11/weekly-sharing-45/">每周分享第 45 期</a></h1>
                </header>
                
                <div class="article-meta">
                    <a href="/misc/2019/10/11/weekly-sharing-45/" class="article-date">
                        <time datetime='2019-10-11T14:27:00.000&#43;08:00' itemprop="datePublished">2019-10-11</time>
                    </a>
                    
                    
                    
                    <div class="article-comment-link-wrap">
                        <a href="/misc/2019/10/11/weekly-sharing-45/#disqus_thread" class="article-comment-link">Comments</a>
                    </div>
                    
                </div>
                <div class="article-entry" itemprop="articleBody">
                    <p>
                        
                     Android ARM32/64 环境模拟 https://github.com/zhkl0228/unidbg Calibre 4.0 https://readhacker.news/s/4aukk Rust 的 gRPC 实现 https://github.com/hyperium/tonic JAVA API 历史 https://github.com/marchof/java-almanac Elm 开发 dev server https://github.com/wking-io/elm-live 另一个静态网站生成器 https://github.com/getzola/zola Catalina 发布 Notarization 的相关情况 https://eclecticlight.co/2019/06/07/notarization-in-mojave-and-catalina/ https://eclecticlight.co/2019/05/31/can-you-tell-whether-code-has-been-notarized/ 椭圆曲线加密算法 https://fangpenlin.com/posts/2019/10/07/elliptic-curve-cryptography-explained/ Travis CI 添加 ARM 支持 https://blog.travis-ci.com/2019-10-07-multi-cpu-architecture-support CD 上的结构 https://readhacker.news/s/4aDHB 在线 TAC 的虚拟机 https://jiege.ch/online_tac_vm/ 在线 Decaf 编译和运行 https://jiege.ch/online_decaf/  
                    </p>
                    <p class="article-more-link">
                        <a href="/misc/2019/10/11/weekly-sharing-45/">Read More</a>
                    </p>
                </div>

                
                <footer class="article-footer">
                    <ul class="article-tag-list">
                        
                        <li class="article-tag-list-item">
                            <a class="article-tag-list-link" href="https://jiege.ch/tags/weeklysharing">weeklysharing
                            </a>
                        </li>
                        
                    </ul>
                </footer>
                
            </div>
        </article>
        
        <article class="article article-type-post" itemscope itemprop="blogPost">
            <div class="article-inner">
                
                
                <header class="article-header">
                    <h1 itemprop="name"><a class="article-title" href="/misc/2019/10/04/weekly-sharing-44/">每周分享第 44 期</a></h1>
                </header>
                
                <div class="article-meta">
                    <a href="/misc/2019/10/04/weekly-sharing-44/" class="article-date">
                        <time datetime='2019-10-04T15:47:00.000&#43;08:00' itemprop="datePublished">2019-10-04</time>
                    </a>
                    
                    
                    
                    <div class="article-comment-link-wrap">
                        <a href="/misc/2019/10/04/weekly-sharing-44/#disqus_thread" class="article-comment-link">Comments</a>
                    </div>
                    
                </div>
                <div class="article-entry" itemprop="articleBody">
                    <p>
                        
                      Modern Script Loading https://jasonformat.com/modern-script-loading/
  如何实现 closure http://craftinginterpreters.com/closures.html
  加速 uniform_int_distribution 实现 https://lemire.me/blog/2019/09/28/doubling-the-speed-of-stduniform_int_distribution-in-the-gnu-c-library/
  在 FPGA 上运行 Rocket Chip 教程 https://github.com/cnrv/fpga-rocket-chip
  Xilinx Bitstream 逆向 https://prjxray.readthedocs.io/en/latest/
  JVM 利用 SIGSEGV 进行 null 检测 https://jcdav.is/2015/10/06/SIGSEGV-as-control-flow/
  Async/Await 进入 Rust Beta https://blog.rust-lang.org/2019/09/30/Async-await-hits-beta.html
  在 Rust 里实现 Plugin http://adventures.michaelfbryan.com/posts/plugins-in-rust/
  
                    </p>
                    <p class="article-more-link">
                        <a href="/misc/2019/10/04/weekly-sharing-44/">Read More</a>
                    </p>
                </div>

                
                <footer class="article-footer">
                    <ul class="article-tag-list">
                        
                        <li class="article-tag-list-item">
                            <a class="article-tag-list-link" href="https://jiege.ch/tags/weeklysharing">weeklysharing
                            </a>
                        </li>
                        
                    </ul>
                </footer>
                
            </div>
        </article>
        
        <article class="article article-type-post" itemscope itemprop="blogPost">
            <div class="article-inner">
                
                
                <header class="article-header">
                    <h1 itemprop="name"><a class="article-title" href="/software/2019/09/28/use-nginx-as-rtmp-server/">用 Nginx 作为 RTMP 服务器并提供直播服务</a></h1>
                </header>
                
                <div class="article-meta">
                    <a href="/software/2019/09/28/use-nginx-as-rtmp-server/" class="article-date">
                        <time datetime='2019-09-28T10:15:00.000&#43;08:00' itemprop="datePublished">2019-09-28</time>
                    </a>
                    
                    
                    
                    <div class="article-comment-link-wrap">
                        <a href="/software/2019/09/28/use-nginx-as-rtmp-server/#disqus_thread" class="article-comment-link">Comments</a>
                    </div>
                    
                </div>
                <div class="article-entry" itemprop="articleBody">
                    <p>
                        
                    Nginx 除了可以做 HTTP 服务器以外，还可以做 RTMP 服务器，同时转成 HLS 再提供给用户，这样可以实现一个直播的服务器，用 OBS 推上来即可。
首先要安装 nginx-rtmp-server 模块，很多的发行版都已经包含了，它的主页是 https://github.com/arut/nginx-rtmp-module ，下面很多内容也是来自于它的教程中。
接着，配置 Nginx ，在 nginx.conf 的顶层中添加如下的配置：
rtmp { server { listen 1935; chunk_size 4096; application live { live on; record off; hls on; hls_path /path/to/save/hls; hls_fragment 1s; hls_playlist_length 10s; } } } 这里表示 Nginx 要在 1935 监听一个 RTMP 服务器，然后把 live 下的视频切成片然后存在目录下，提供一个 m3u8 文件以供播放器使用。这里的参数都可以按照实际需求进行调整。这时候应该可以看到 nginx 正确监听1935 端口，这是 rtmp 的默认端口。
接着，需要在一个 HTTP server 路径下把 HLS serve 出去：
 location /hls { # Serve HLS fragments types { application/vnd.
                    </p>
                    <p class="article-more-link">
                        <a href="/software/2019/09/28/use-nginx-as-rtmp-server/">Read More</a>
                    </p>
                </div>

                
                <footer class="article-footer">
                    <ul class="article-tag-list">
                        
                        <li class="article-tag-list-item">
                            <a class="article-tag-list-link" href="https://jiege.ch/tags/nginx">nginx
                            </a>
                        </li>
                        
                        <li class="article-tag-list-item">
                            <a class="article-tag-list-link" href="https://jiege.ch/tags/rtmp">rtmp
                            </a>
                        </li>
                        
                        <li class="article-tag-list-item">
                            <a class="article-tag-list-link" href="https://jiege.ch/tags/hls">hls
                            </a>
                        </li>
                        
                        <li class="article-tag-list-item">
                            <a class="article-tag-list-link" href="https://jiege.ch/tags/obs">obs
                            </a>
                        </li>
                        
                    </ul>
                </footer>
                
            </div>
        </article>
        

        

<nav id="page-nav">
    
    <a href="/page/2/" rel="prev" class="extend prev">&laquo; Prev</a>
    
    
    
    <a href="/">1</a>
    
    
    
    <a href="/page/2/">2</a>
    
    
    
    <span class="page-number current">3</span>
    
    
    
    <a href="/page/4/">4</a>
    
    
    
    <a href="/page/5/">5</a>
    
    
    
    <a href="/page/6/">6</a>
    
    
    
    <a href="/page/7/">7</a>
    
    
    
    <a href="/page/8/">8</a>
    
    
    
    <a href="/page/9/">9</a>
    
    
    
    <a href="/page/10/">10</a>
    
    
    
    <a href="/page/11/">11</a>
    
    
    
    <a href="/page/12/">12</a>
    
    
    
    <a href="/page/13/">13</a>
    
    
    
    <a href="/page/14/">14</a>
    
    
    
    <a href="/page/15/">15</a>
    
    
    
    <a href="/page/16/">16</a>
    
    
    
    <a href="/page/17/">17</a>
    
    
    
    <a href="/page/18/">18</a>
    
    
    
    <a href="/page/19/">19</a>
    
    
    
    <a href="/page/20/">20</a>
    
    
    
    <a href="/page/21/">21</a>
    
    
    
    <a href="/page/22/">22</a>
    
    

    
    <a href="/page/4/" rel="next" class="extend next">Next &raquo;</a>
    
</nav>

    </section>
    <footer id="footer">
    <div class="outer">
        <div id="footer-info" class="inner">
            &copy; 2020 杰哥的{运维,编程,调板子}小笔记
            <br />
            Powered by <a href="https://gohugo.io" target="_blank">Hugo</a> with theme <a href="https://github.com/carsonip/hugo-theme-minos" target="_blank">Minos</a>
        </div>
    </div>
    

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/styles/tomorrow-night.min.css" integrity="sha256-2wL88NKUqvJi/ExflDzkzUumjUM73mcK2gBvBBeLvTk=" crossorigin="anonymous" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/highlight.min.js" integrity="sha256-KbfTjB0WZ8vvXngdpJGY3Yp3xKk+tttbqClO11anCIU=" crossorigin="anonymous"></script>
    <script>hljs.initHighlightingOnLoad();</script>

    
    <script>
        document.getElementById('main-nav-toggle').addEventListener('click', function () {
            var header = document.getElementById('header');
            if (header.classList.contains('mobile-on')) {
                header.classList.remove('mobile-on');
            } else {
                header.classList.add('mobile-on');
            }
        });
    </script>
</footer>

</div>
</body>
</html>