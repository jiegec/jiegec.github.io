
<!DOCTYPE html>

<html class="no-js" lang="zh">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<meta content="杰哥的{运维,编程,调板子}小笔记" name="description"/>
<link href="https://jia.je/page/32/" rel="canonical"/>
<link href="../../about/" rel="next"/>
<link href="../../feed_rss_created.xml" rel="alternate" title="RSS 订阅" type="application/rss+xml"/>
<link href="../../feed_rss_updated.xml" rel="alternate" title="已更新内容的 RSS 订阅" type="application/rss+xml"/>
<link href="../../assets/images/favicon.png" rel="icon"/>
<meta content="mkdocs-1.4.3, mkdocs-material-9.2.0-b0" name="generator"/>
<title>博客 - 杰哥的{运维,编程,调板子}小笔记</title>
<link href="../../assets/stylesheets/main.0c456da8.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
<script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
</head>
<body dir="ltr">
<script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#_1">
          跳转至
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
<nav aria-label="页眉" class="md-header__inner md-grid">
<a aria-label="杰哥的{运维,编程,调板子}小笔记" class="md-header__button md-logo" data-md-component="logo" href="../.." title="杰哥的{运维,编程,调板子}小笔记">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"></path></svg>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            杰哥的{运维,编程,调板子}小笔记
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              博客
            
          </span>
</div>
</div>
</div>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="搜索" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="搜索" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg>
</label>
<nav aria-label="查找" class="md-search__options">
<button aria-label="清空当前内容" class="md-search__icon md-icon" tabindex="-1" title="清空当前内容" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"></path></svg>
</button>
</nav>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
<ol class="md-search-result__list" role="presentation"></ol>
</div>
</div>
</div>
</div>
</div>
</nav>
<nav aria-label="标签" class="md-tabs" data-md-component="tabs">
<div class="md-grid">
<ul class="md-tabs__list">
<li class="md-tabs__item md-tabs__item--active">
<a class="md-tabs__link" href="../..">
        
  
    
  
  博客

      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../about/">
        
  
    
  
  关于

      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../open-source-contributions/">
        
  
    
  
  开源

      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../tags/">
        
  
    
  
  标签

      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="/kb/">
        
  
    
  
  知识库

      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../series/">
        
  
    
  
  系列

      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../projects/">
        
  
    
  
  项目

      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../tools/">
        
  
    
  
  工具

      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="/feed.xml">
        
  
    
  
  订阅

      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../archive/2023/">
          
  
  归档

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../category/crypto/">
          
  
  分类

        </a>
</li>
</ul>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="导航栏" class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="杰哥的{运维,编程,调板子}小笔记" class="md-nav__button md-logo" data-md-component="logo" href="../.." title="杰哥的{运维,编程,调板子}小笔记">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"></path></svg>
</a>
    杰哥的{运维,编程,调板子}小笔记
  </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--active">
<a class="md-nav__link" href="../..">
<span class="md-ellipsis">
    博客
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../about/">
<span class="md-ellipsis">
    关于
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../open-source-contributions/">
<span class="md-ellipsis">
    开源
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../tags/">
<span class="md-ellipsis">
    标签
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="/kb/">
<span class="md-ellipsis">
    知识库
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../series/">
<span class="md-ellipsis">
    系列
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../projects/">
<span class="md-ellipsis">
    项目
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../tools/">
<span class="md-ellipsis">
    工具
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="/feed.xml">
<span class="md-ellipsis">
    订阅
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_10" type="checkbox"/>
<label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="0">
<span class="md-ellipsis">
    归档
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_10_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_10">
<span class="md-nav__icon md-icon"></span>
            归档
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../archive/2023/">
<span class="md-ellipsis">
    2023
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../archive/2022/">
<span class="md-ellipsis">
    2022
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../archive/2021/">
<span class="md-ellipsis">
    2021
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../archive/2020/">
<span class="md-ellipsis">
    2020
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../archive/2019/">
<span class="md-ellipsis">
    2019
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../archive/2018/">
<span class="md-ellipsis">
    2018
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../archive/2017/">
<span class="md-ellipsis">
    2017
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../archive/2016/">
<span class="md-ellipsis">
    2016
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../archive/2014/">
<span class="md-ellipsis">
    2014
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_11" type="checkbox"/>
<label class="md-nav__link" for="__nav_11" id="__nav_11_label" tabindex="0">
<span class="md-ellipsis">
    分类
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_11_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_11">
<span class="md-nav__icon md-icon"></span>
            分类
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../category/crypto/">
<span class="md-ellipsis">
    crypto
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../category/csdn/">
<span class="md-ellipsis">
    csdn
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../category/ctf/">
<span class="md-ellipsis">
    ctf
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../category/devops/">
<span class="md-ellipsis">
    devops
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../category/hardware/">
<span class="md-ellipsis">
    hardware
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../category/life/">
<span class="md-ellipsis">
    life
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../category/logo/">
<span class="md-ellipsis">
    logo
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../category/meta/">
<span class="md-ellipsis">
    meta
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../category/misc/">
<span class="md-ellipsis">
    misc
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../category/networking/">
<span class="md-ellipsis">
    networking
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../category/news/">
<span class="md-ellipsis">
    news
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../category/os/">
<span class="md-ellipsis">
    os
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../category/others/">
<span class="md-ellipsis">
    others
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../category/programming/">
<span class="md-ellipsis">
    programming
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../category/software/">
<span class="md-ellipsis">
    software
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../category/speech/">
<span class="md-ellipsis">
    speech
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../category/system/">
<span class="md-ellipsis">
    system
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../category/unboxing/">
<span class="md-ellipsis">
    unboxing
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<div class="md-content__inner">
<header class="md-typeset">
<h1 id="_1"><a class="toclink" href="#_1">博客</a></h1>
</header>
<article class="md-post md-post--excerpt">
<header class="md-post__header">
<div class="md-post__meta md-meta">
<ul class="md-meta__list">
<li class="md-meta__item">
<time datetime="2018-04-28 00:00:00">2018年4月28日</time></li>
<li class="md-meta__item">
            分类于
            
              <a class="md-meta__link" href="../../category/networking/">networking</a></li>
<li class="md-meta__item">
            
              需要 2 分钟阅读时间
            
          </li>
</ul>
</div>
</header>
<div class="md-post__content md-typeset">
<h2 id="cisco-ac-ap"><a class="toclink" href="../../networking/2018/04/28/wifi-with-cisco-ac-and-ap/">使用 Cisco AC + AP 组合搭建网络实践</a></h2>
<p>有一台已配置好直接可用的 AC 在地址 ac-address。我们需要搭建交换机 + AP 的网络，并且用一台 Linux 服务器进行 DHCP 从而给 AP 分发 AC 的地址。这里以 systemd-networkd 为例。</p>
<p>我们约定，vlan 2 上联外网，vlan 3 为 Linux 服务器和 AP 的内部网络。</p>
<p>接下来，配置交换机给 Linux 服务器的端口为 trunk 口，然后将下联 Cisco AP 的端口都设为 access vlan 3 模式。接下来在 Linux 服务器上配置 DHCP 服务器和 NAT。</p>
<p>如果 Linux 服务器的 interface 名称为 eno1 :</p>
<p>配置两个 VLAN interface:
<div class="language-text highlight"><pre><span></span><code><span id="__span-0-1"><a href="../../networking/2018/04/28/wifi-with-cisco-ac-and-ap/#__codelineno-0-1" id="__codelineno-0-1" name="__codelineno-0-1"></a>$ cat /etc/systemd/network/eno1.network
</span><span id="__span-0-2"><a href="../../networking/2018/04/28/wifi-with-cisco-ac-and-ap/#__codelineno-0-2" id="__codelineno-0-2" name="__codelineno-0-2"></a>[Match]
</span><span id="__span-0-3"><a href="../../networking/2018/04/28/wifi-with-cisco-ac-and-ap/#__codelineno-0-3" id="__codelineno-0-3" name="__codelineno-0-3"></a>Name=eno1
</span><span id="__span-0-4"><a href="../../networking/2018/04/28/wifi-with-cisco-ac-and-ap/#__codelineno-0-4" id="__codelineno-0-4" name="__codelineno-0-4"></a>
</span><span id="__span-0-5"><a href="../../networking/2018/04/28/wifi-with-cisco-ac-and-ap/#__codelineno-0-5" id="__codelineno-0-5" name="__codelineno-0-5"></a>[Network]
</span><span id="__span-0-6"><a href="../../networking/2018/04/28/wifi-with-cisco-ac-and-ap/#__codelineno-0-6" id="__codelineno-0-6" name="__codelineno-0-6"></a>VLAN=eno1.2
</span><span id="__span-0-7"><a href="../../networking/2018/04/28/wifi-with-cisco-ac-and-ap/#__codelineno-0-7" id="__codelineno-0-7" name="__codelineno-0-7"></a>VLAN=eno1.3
</span></code></pre></div></p>
<p>相应添加 VLAN 配置：
<div class="language-text highlight"><pre><span></span><code><span id="__span-1-1"><a href="../../networking/2018/04/28/wifi-with-cisco-ac-and-ap/#__codelineno-1-1" id="__codelineno-1-1" name="__codelineno-1-1"></a>$ cat /etc/systemd/network/eno1.2.network
</span><span id="__span-1-2"><a href="../../networking/2018/04/28/wifi-with-cisco-ac-and-ap/#__codelineno-1-2" id="__codelineno-1-2" name="__codelineno-1-2"></a>[NetDev]
</span><span id="__span-1-3"><a href="../../networking/2018/04/28/wifi-with-cisco-ac-and-ap/#__codelineno-1-3" id="__codelineno-1-3" name="__codelineno-1-3"></a>Name=eno1.2
</span><span id="__span-1-4"><a href="../../networking/2018/04/28/wifi-with-cisco-ac-and-ap/#__codelineno-1-4" id="__codelineno-1-4" name="__codelineno-1-4"></a>
</span><span id="__span-1-5"><a href="../../networking/2018/04/28/wifi-with-cisco-ac-and-ap/#__codelineno-1-5" id="__codelineno-1-5" name="__codelineno-1-5"></a>[VLAN]
</span><span id="__span-1-6"><a href="../../networking/2018/04/28/wifi-with-cisco-ac-and-ap/#__codelineno-1-6" id="__codelineno-1-6" name="__codelineno-1-6"></a>Id=2
</span><span id="__span-1-7"><a href="../../networking/2018/04/28/wifi-with-cisco-ac-and-ap/#__codelineno-1-7" id="__codelineno-1-7" name="__codelineno-1-7"></a>$ cat /etc/systemd/network/eno1.3.network
</span><span id="__span-1-8"><a href="../../networking/2018/04/28/wifi-with-cisco-ac-and-ap/#__codelineno-1-8" id="__codelineno-1-8" name="__codelineno-1-8"></a>[NetDev]
</span><span id="__span-1-9"><a href="../../networking/2018/04/28/wifi-with-cisco-ac-and-ap/#__codelineno-1-9" id="__codelineno-1-9" name="__codelineno-1-9"></a>Name=eno1.3
</span><span id="__span-1-10"><a href="../../networking/2018/04/28/wifi-with-cisco-ac-and-ap/#__codelineno-1-10" id="__codelineno-1-10" name="__codelineno-1-10"></a>
</span><span id="__span-1-11"><a href="../../networking/2018/04/28/wifi-with-cisco-ac-and-ap/#__codelineno-1-11" id="__codelineno-1-11" name="__codelineno-1-11"></a>[VLAN]
</span><span id="__span-1-12"><a href="../../networking/2018/04/28/wifi-with-cisco-ac-and-ap/#__codelineno-1-12" id="__codelineno-1-12" name="__codelineno-1-12"></a>Id=3
</span></code></pre></div></p>
<p>配置上行的 eno1.2 interface 的静态地址：
<div class="language-text highlight"><pre><span></span><code><span id="__span-2-1"><a href="../../networking/2018/04/28/wifi-with-cisco-ac-and-ap/#__codelineno-2-1" id="__codelineno-2-1" name="__codelineno-2-1"></a>$ cat /etc/systemd/network/eno1.2.network
</span><span id="__span-2-2"><a href="../../networking/2018/04/28/wifi-with-cisco-ac-and-ap/#__codelineno-2-2" id="__codelineno-2-2" name="__codelineno-2-2"></a>[Match]
</span><span id="__span-2-3"><a href="../../networking/2018/04/28/wifi-with-cisco-ac-and-ap/#__codelineno-2-3" id="__codelineno-2-3" name="__codelineno-2-3"></a>Name=eno1.2
</span><span id="__span-2-4"><a href="../../networking/2018/04/28/wifi-with-cisco-ac-and-ap/#__codelineno-2-4" id="__codelineno-2-4" name="__codelineno-2-4"></a>
</span><span id="__span-2-5"><a href="../../networking/2018/04/28/wifi-with-cisco-ac-and-ap/#__codelineno-2-5" id="__codelineno-2-5" name="__codelineno-2-5"></a>[Network]
</span><span id="__span-2-6"><a href="../../networking/2018/04/28/wifi-with-cisco-ac-and-ap/#__codelineno-2-6" id="__codelineno-2-6" name="__codelineno-2-6"></a>Address=123.123.123.123/24
</span><span id="__span-2-7"><a href="../../networking/2018/04/28/wifi-with-cisco-ac-and-ap/#__codelineno-2-7" id="__codelineno-2-7" name="__codelineno-2-7"></a>Gateway=123.123.123.1
</span><span id="__span-2-8"><a href="../../networking/2018/04/28/wifi-with-cisco-ac-and-ap/#__codelineno-2-8" id="__codelineno-2-8" name="__codelineno-2-8"></a>DNS=1.2.4.8
</span></code></pre></div></p>
<p>配置内部网络 eno1.3 interface:
<div class="language-text highlight"><pre><span></span><code><span id="__span-3-1"><a href="../../networking/2018/04/28/wifi-with-cisco-ac-and-ap/#__codelineno-3-1" id="__codelineno-3-1" name="__codelineno-3-1"></a>$ cat /etc/systemd/network/eno1.3.network
</span><span id="__span-3-2"><a href="../../networking/2018/04/28/wifi-with-cisco-ac-and-ap/#__codelineno-3-2" id="__codelineno-3-2" name="__codelineno-3-2"></a>[Match]
</span><span id="__span-3-3"><a href="../../networking/2018/04/28/wifi-with-cisco-ac-and-ap/#__codelineno-3-3" id="__codelineno-3-3" name="__codelineno-3-3"></a>Name=eno1.3
</span><span id="__span-3-4"><a href="../../networking/2018/04/28/wifi-with-cisco-ac-and-ap/#__codelineno-3-4" id="__codelineno-3-4" name="__codelineno-3-4"></a>
</span><span id="__span-3-5"><a href="../../networking/2018/04/28/wifi-with-cisco-ac-and-ap/#__codelineno-3-5" id="__codelineno-3-5" name="__codelineno-3-5"></a>[Network]
</span><span id="__span-3-6"><a href="../../networking/2018/04/28/wifi-with-cisco-ac-and-ap/#__codelineno-3-6" id="__codelineno-3-6" name="__codelineno-3-6"></a>Address=192.168.1.1/24
</span></code></pre></div></p>
<p>配置 dhcpd (isc-dhcp-server):
<div class="language-text highlight"><pre><span></span><code><span id="__span-4-1"><a href="../../networking/2018/04/28/wifi-with-cisco-ac-and-ap/#__codelineno-4-1" id="__codelineno-4-1" name="__codelineno-4-1"></a>$ cat /etc/default/isc-dhcp-server
</span><span id="__span-4-2"><a href="../../networking/2018/04/28/wifi-with-cisco-ac-and-ap/#__codelineno-4-2" id="__codelineno-4-2" name="__codelineno-4-2"></a>INTERFACESv4="eno1.3"
</span><span id="__span-4-3"><a href="../../networking/2018/04/28/wifi-with-cisco-ac-and-ap/#__codelineno-4-3" id="__codelineno-4-3" name="__codelineno-4-3"></a>$ cat /etc/dhcpd.conf
</span><span id="__span-4-4"><a href="../../networking/2018/04/28/wifi-with-cisco-ac-and-ap/#__codelineno-4-4" id="__codelineno-4-4" name="__codelineno-4-4"></a>option space Cisco_LWAPP_AP;
</span><span id="__span-4-5"><a href="../../networking/2018/04/28/wifi-with-cisco-ac-and-ap/#__codelineno-4-5" id="__codelineno-4-5" name="__codelineno-4-5"></a>option Cisco_LWAPP_AP.server-address code 241 = array of ip-address;
</span><span id="__span-4-6"><a href="../../networking/2018/04/28/wifi-with-cisco-ac-and-ap/#__codelineno-4-6" id="__codelineno-4-6" name="__codelineno-4-6"></a>
</span><span id="__span-4-7"><a href="../../networking/2018/04/28/wifi-with-cisco-ac-and-ap/#__codelineno-4-7" id="__codelineno-4-7" name="__codelineno-4-7"></a>subnet 192.168.1.0 netmask 255.255.255.0 {
</span><span id="__span-4-8"><a href="../../networking/2018/04/28/wifi-with-cisco-ac-and-ap/#__codelineno-4-8" id="__codelineno-4-8" name="__codelineno-4-8"></a>  range 192.168.1.100 192.168.1.200;
</span><span id="__span-4-9"><a href="../../networking/2018/04/28/wifi-with-cisco-ac-and-ap/#__codelineno-4-9" id="__codelineno-4-9" name="__codelineno-4-9"></a>  option routers 192.168.1.1;
</span><span id="__span-4-10"><a href="../../networking/2018/04/28/wifi-with-cisco-ac-and-ap/#__codelineno-4-10" id="__codelineno-4-10" name="__codelineno-4-10"></a>  vendor-option-space Cisco_LWAPP_AP;
</span><span id="__span-4-11"><a href="../../networking/2018/04/28/wifi-with-cisco-ac-and-ap/#__codelineno-4-11" id="__codelineno-4-11" name="__codelineno-4-11"></a>  option Cisco_LWAPP_AP.server-address $ac-address;
</span><span id="__span-4-12"><a href="../../networking/2018/04/28/wifi-with-cisco-ac-and-ap/#__codelineno-4-12" id="__codelineno-4-12" name="__codelineno-4-12"></a>}
</span></code></pre></div></p>
<p>配置 iptables 做 NAT:
<div class="language-text highlight"><pre><span></span><code><span id="__span-5-1"><a href="../../networking/2018/04/28/wifi-with-cisco-ac-and-ap/#__codelineno-5-1" id="__codelineno-5-1" name="__codelineno-5-1"></a>iptables -t nat -A POSTROUTING -o eno1.2 -j MASQUERADE
</span><span id="__span-5-2"><a href="../../networking/2018/04/28/wifi-with-cisco-ac-and-ap/#__codelineno-5-2" id="__codelineno-5-2" name="__codelineno-5-2"></a>iptables-save &gt; /etc/iptables/iptables.rules
</span></code></pre></div></p>
<p>打开 ipv4 forwarding:
<div class="language-text highlight"><pre><span></span><code><span id="__span-6-1"><a href="../../networking/2018/04/28/wifi-with-cisco-ac-and-ap/#__codelineno-6-1" id="__codelineno-6-1" name="__codelineno-6-1"></a>echo 1 &gt; /proc/sys/net/ipv4/ip_forward
</span><span id="__span-6-2"><a href="../../networking/2018/04/28/wifi-with-cisco-ac-and-ap/#__codelineno-6-2" id="__codelineno-6-2" name="__codelineno-6-2"></a>echo 'net.ipv4.conf.all.forwarding=1' &gt;&gt; /etc/sysctl.d/99-ipv4-forwarding.conf
</span></code></pre></div></p>
<nav class="md-post__action">
<a href="../../networking/2018/04/28/wifi-with-cisco-ac-and-ap/">
        继续阅读
      </a>
</nav>
</div>
</article>
<article class="md-post md-post--excerpt">
<header class="md-post__header">
<div class="md-post__meta md-meta">
<ul class="md-meta__list">
<li class="md-meta__item">
<time datetime="2018-04-17 00:00:00">2018年4月17日</time></li>
<li class="md-meta__item">
            分类于
            
              <a class="md-meta__link" href="../../category/programming/">programming</a></li>
<li class="md-meta__item">
            
              需要 1 分钟阅读时间
            
          </li>
</ul>
</div>
</header>
<div class="md-post__content md-typeset">
<h2 id="gdb-801"><a class="toclink" href="../../programming/2018/04/17/downgrade-gdb/">把 GDB 降级到 8.0.1</a></h2>
<p>在 macOS 上使用 GDB 需要 codesigning。但是在 GDB 升级到 8.1 后这种方法不知道为何失效了。所以我安装回了 GDB 8.0.1 并且重新 codesigning，现在又可以正常升级了。</p>
<p>对 Formula 进行 patch：</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-0-1"><a href="../../programming/2018/04/17/downgrade-gdb/#__codelineno-0-1" id="__codelineno-0-1" name="__codelineno-0-1"></a>diff --git a/Formula/gdb.rb b/Formula/gdb.rb
</span><span id="__span-0-2"><a href="../../programming/2018/04/17/downgrade-gdb/#__codelineno-0-2" id="__codelineno-0-2" name="__codelineno-0-2"></a>index 29a1c590..25360893 100644
</span><span id="__span-0-3"><a href="../../programming/2018/04/17/downgrade-gdb/#__codelineno-0-3" id="__codelineno-0-3" name="__codelineno-0-3"></a>--- a/Formula/gdb.rb
</span><span id="__span-0-4"><a href="../../programming/2018/04/17/downgrade-gdb/#__codelineno-0-4" id="__codelineno-0-4" name="__codelineno-0-4"></a>+++ b/Formula/gdb.rb
</span><span id="__span-0-5"><a href="../../programming/2018/04/17/downgrade-gdb/#__codelineno-0-5" id="__codelineno-0-5" name="__codelineno-0-5"></a>@@ -1,14 +1,15 @@
</span><span id="__span-0-6"><a href="../../programming/2018/04/17/downgrade-gdb/#__codelineno-0-6" id="__codelineno-0-6" name="__codelineno-0-6"></a> class Gdb &lt; Formula
</span><span id="__span-0-7"><a href="../../programming/2018/04/17/downgrade-gdb/#__codelineno-0-7" id="__codelineno-0-7" name="__codelineno-0-7"></a>   desc "GNU debugger"
</span><span id="__span-0-8"><a href="../../programming/2018/04/17/downgrade-gdb/#__codelineno-0-8" id="__codelineno-0-8" name="__codelineno-0-8"></a>   homepage "https://www.gnu.org/software/gdb/"
</span><span id="__span-0-9"><a href="../../programming/2018/04/17/downgrade-gdb/#__codelineno-0-9" id="__codelineno-0-9" name="__codelineno-0-9"></a>-  url "https://ftp.gnu.org/gnu/gdb/gdb-8.1.tar.xz"
</span><span id="__span-0-10"><a href="../../programming/2018/04/17/downgrade-gdb/#__codelineno-0-10" id="__codelineno-0-10" name="__codelineno-0-10"></a>-  mirror "https://ftpmirror.gnu.org/gdb/gdb-8.1.tar.xz"
</span><span id="__span-0-11"><a href="../../programming/2018/04/17/downgrade-gdb/#__codelineno-0-11" id="__codelineno-0-11" name="__codelineno-0-11"></a>-  sha256 "af61a0263858e69c5dce51eab26662ff3d2ad9aa68da9583e8143b5426be4b34"
</span><span id="__span-0-12"><a href="../../programming/2018/04/17/downgrade-gdb/#__codelineno-0-12" id="__codelineno-0-12" name="__codelineno-0-12"></a>+  url "https://ftp.gnu.org/gnu/gdb/gdb-8.0.1.tar.xz"
</span><span id="__span-0-13"><a href="../../programming/2018/04/17/downgrade-gdb/#__codelineno-0-13" id="__codelineno-0-13" name="__codelineno-0-13"></a>+  mirror "https://ftpmirror.gnu.org/gdb/gdb-8.0.1.tar.xz"
</span><span id="__span-0-14"><a href="../../programming/2018/04/17/downgrade-gdb/#__codelineno-0-14" id="__codelineno-0-14" name="__codelineno-0-14"></a>+  sha256 "3dbd5f93e36ba2815ad0efab030dcd0c7b211d7b353a40a53f4c02d7d56295e3"
</span><span id="__span-0-15"><a href="../../programming/2018/04/17/downgrade-gdb/#__codelineno-0-15" id="__codelineno-0-15" name="__codelineno-0-15"></a>
</span><span id="__span-0-16"><a href="../../programming/2018/04/17/downgrade-gdb/#__codelineno-0-16" id="__codelineno-0-16" name="__codelineno-0-16"></a>   bottle do
</span><span id="__span-0-17"><a href="../../programming/2018/04/17/downgrade-gdb/#__codelineno-0-17" id="__codelineno-0-17" name="__codelineno-0-17"></a>-    sha256 "43a6d6cca157ef70d13848f35c04e11d832dc0c96f5bcf53a43330f524b3ac40" =&gt; :high_sierra
</span><span id="__span-0-18"><a href="../../programming/2018/04/17/downgrade-gdb/#__codelineno-0-18" id="__codelineno-0-18" name="__codelineno-0-18"></a>-    sha256 "fe7c6261f9164e7a744c9c512ba7e5afff0e74e373ece9b5aa19d5da6443bfc2" =&gt; :sierra
</span><span id="__span-0-19"><a href="../../programming/2018/04/17/downgrade-gdb/#__codelineno-0-19" id="__codelineno-0-19" name="__codelineno-0-19"></a>-    sha256 "cd89001bcf8c93b5d6425ab91a400aeffe0cd5bbb0eccd8ab38c719ab5ca34ba" =&gt; :el_capitan
</span><span id="__span-0-20"><a href="../../programming/2018/04/17/downgrade-gdb/#__codelineno-0-20" id="__codelineno-0-20" name="__codelineno-0-20"></a>+    sha256 "e98ad847402592bd48a9b1468fefb2fac32aff1fa19c2681c3cea7fb457baaa0" =&gt; :high_sierra
</span><span id="__span-0-21"><a href="../../programming/2018/04/17/downgrade-gdb/#__codelineno-0-21" id="__codelineno-0-21" name="__codelineno-0-21"></a>+    sha256 "0fdd20562170c520cfb16e63d902c13a01ec468cb39a85851412e7515b6241e9" =&gt; :sierra
</span><span id="__span-0-22"><a href="../../programming/2018/04/17/downgrade-gdb/#__codelineno-0-22" id="__codelineno-0-22" name="__codelineno-0-22"></a>+    sha256 "f51136c70cff44167dfb8c76b679292d911bd134c2de3fef40777da5f1f308a0" =&gt; :el_capitan
</span><span id="__span-0-23"><a href="../../programming/2018/04/17/downgrade-gdb/#__codelineno-0-23" id="__codelineno-0-23" name="__codelineno-0-23"></a>+    sha256 "2b32a51703f6e254572c55575f08f1e0c7bc2f4e96778cb1fa6582eddfb1d113" =&gt; :yosemite
</span><span id="__span-0-24"><a href="../../programming/2018/04/17/downgrade-gdb/#__codelineno-0-24" id="__codelineno-0-24" name="__codelineno-0-24"></a>   end
</span><span id="__span-0-25"><a href="../../programming/2018/04/17/downgrade-gdb/#__codelineno-0-25" id="__codelineno-0-25" name="__codelineno-0-25"></a>
</span><span id="__span-0-26"><a href="../../programming/2018/04/17/downgrade-gdb/#__codelineno-0-26" id="__codelineno-0-26" name="__codelineno-0-26"></a>   deprecated_option "with-brewed-python" =&gt; "with-python@2"
</span></code></pre></div>
<nav class="md-post__action">
<a href="../../programming/2018/04/17/downgrade-gdb/">
        继续阅读
      </a>
</nav>
</div>
</article>
<article class="md-post md-post--excerpt">
<header class="md-post__header">
<div class="md-post__meta md-meta">
<ul class="md-meta__list">
<li class="md-meta__item">
<time datetime="2018-04-10 00:00:00">2018年4月10日</time></li>
<li class="md-meta__item">
            分类于
            
              <a class="md-meta__link" href="../../category/programming/">programming</a></li>
<li class="md-meta__item">
            
              需要 3 分钟阅读时间
            
          </li>
</ul>
</div>
</header>
<div class="md-post__content md-typeset">
<h2 id="stanford-cs140e-8"><a class="toclink" href="../../programming/2018/04/10/thoughts-on-stanford-cs140e-8/">近来做 Stanford CS140e 的一些进展和思考（8）</a></h2>
<p>在<a href="../../programming/2018/04/07/thoughts-on-stanford-cs140e-7/">上一篇文章</a>之后，我其实还是很忙，但是一直心理惦记着这件事，毕竟只剩最后的一点点就可以做完了，不做完总是觉得心痒。</p>
<p>今天做的部分是调度。我们目前只在 EL0 运行了一个 shell，每当触发 exception 时回到 kernel 进行处理，再回到原来的地方。但现在，我要实现一个 preemtive round-robin scheduler，就需要管理当前的所有进程，并且维护当前的进程状态，当时钟中断到来的时候，决定下一个 time slice 要执行的进程，再切换过去。这个过程当然会遇到不少的坑。</p>
<p>首先，我们需要判断一个进程是否可以执行了。考虑到阻塞的 IO，作者提供了一个优雅的方法：如果这个进程阻塞在 IO 上，那么，提供一个函数，在 scheduler 中调用，判断所需要的数据是否到达。这样，我们就可以一个循环把下一个 time slice 要执行的线程找到。如果找不到，就等待 interrupt 再尝试。</p>
<p>困难的地方在于，在启动的时候，切换到一个起始线程。并且在上下文切换的时候，在 process 1 -&gt; kernel -&gt; process 2 这两步过程中，有许多寄存器都需要仔细考虑如何实现。并且在这个过程中，我也发现了之前写的代码中的问题，最终修复了（目前来看是 working 了）。</p>
<p>我的代码实现在 <a href="https://github.com/jiegec/cs140e/commit/977f179a9b28e88e85f4ba9577a0682bf2b6c57b">这里</a> 。下一步就要写 syscall 了。希望能在期中前抽时间赶紧把这个做完。</p>
<p>18:54 PM Update: 刚实现完了 sleep 的 syscall。比预想中要简单。果然找到了自己实现的调度器的 BUG。此系列大概是完结了。</p>
<p>2019-02-12 Update: <a href="../../programming/2019/02/12/thoughts-on-stanford-cs140e-9/">下一篇文章</a>。</p>
<nav class="md-post__action">
<a href="../../programming/2018/04/10/thoughts-on-stanford-cs140e-8/">
        继续阅读
      </a>
</nav>
</div>
</article>
<article class="md-post md-post--excerpt">
<header class="md-post__header">
<div class="md-post__meta md-meta">
<ul class="md-meta__list">
<li class="md-meta__item">
<time datetime="2018-04-07 00:00:00">2018年4月7日</time></li>
<li class="md-meta__item">
            分类于
            
              <a class="md-meta__link" href="../../category/programming/">programming</a></li>
<li class="md-meta__item">
            
              需要 4 分钟阅读时间
            
          </li>
</ul>
</div>
</header>
<div class="md-post__content md-typeset">
<h2 id="stanford-cs140e-7"><a class="toclink" href="../../programming/2018/04/07/thoughts-on-stanford-cs140e-7/">近来做 Stanford CS140e 的一些进展和思考（7）</a></h2>
<p>在<a href="../../programming/2018/03/05/thoughts-on-stanford-cs140e-6/">上一篇文章</a>之后，我很长时间都没有在继续我这个项目，清明节刚好闲下来了我就回来继续啃它。Stanford 那边已经结课，最后的 <code>3-spawn</code> 也只有一部分，剩下的部分不知道什么时候作者才会填上去了。</p>
<p>这次主要要写的代码就是，对异常的处理。这里的异常并不是我们编程语言中的 catch/throw，而是硬件的异常。AArch64 和 x86 一样，也有不同的特权级别的区分，前者是 EL0~EL3，后者则是 RING0 和 RING3。特权级别高可以往特权级别低转换，但是反过来，只能通过异常的方式提高特权等级，并且切换特权等级后只有固定的一些代码可能会跳转，这就是 <code>exception handler/vectors</code> 。这些函数可以知道是什么原因调用了他们，根据硬件规定好的文档，我们可以知道发生了什么事情，是对齐出错了呢，还是用户调用了 syscall 呢，等等。根据不同的情况，我们需要进行不同的处理。当处理完之后，我们需要考虑，跳转回用户代码的时候，回到哪里，提供什么值，不提供什么。</p>
<p>实现的话，需要很多步骤。首先是构造好 <code>exception vector</code> ，这里作者已经写好了一个宏（这里 @BenYip 遇到了一个 assembler 的 BUG），直接用宏就可以把它写出来。然后，我们需要把它加载到当前 EL 的 <code>VBAR_ELx</code> 寄存器中，当 CPU 抛出异常的时候，就会找到这里相应的处理器进行处理。进到这里以后，我们首先先不考虑太多上下文保存的事情--我们先保证能处理异常，恢复也是个有很多坑的步骤，作者也是在这里分成了两个 Subphase。首先还是从 <code>ESR_ELx</code> 中解析到错误的来源的具体内容，如果是我们在 <code>shell</code> 中自己调用的 <code>brk 2</code> 指令，我们就自己新开一个 <code>shell</code> ，修改了提示符以示区别。这样，我们就成功地捕捉到了这个异常。由于我们还无法恢复回去，所以我们直接死循环。</p>
<p>接下来我们要做的是，从异常中恢复出来。由于用户代码可能在各种地方抛出异常，异常也分同步和异步两种情况，这里有许多需要考虑的问题。为了简化，我们目前只考虑同步的 <code>brk 2</code> 导致的 Brk 异常。为了能恢复之后能够正常运行，我们需要把所有的寄存器都保存下来，即 <code>TrapFrame</code> 。保存的时候需要讲究 AArch64 平台下 SP 寄存器的对齐问题。我们也要把一些特殊的寄存器保存下来。还有一点，就是，因为 <code>exception handler</code> 中调用了 <code>context_save</code> 函数，所以此时的 lr 本身也需要进行保存，这个地方也卡了我很久。最后，再把这些一个一个地恢复到原来的样子，调整 <code>ELR_EL1</code> 使得退回到原来的状态时，会跳过当前的 <code>brk 2</code> 指令，调用它的下一调指令。这样，我们就成功地在遇到异常时，弹出一个 <code>shell</code> ，而且还可以回退回来。</p>
<p>学到了很多很多。之后大三，我们可能需要做自己的 CPU，在自己的 CPU 上跑自己的操作系统，在自己的操作系统中跑自己的编译器，在自己的编译器中编译一个数据库。希望到时我还活着吧。#flag</p>
<p>更新：<a href="../../programming/2018/04/10/thoughts-on-stanford-cs140e-8/">下一篇在这里</a>。</p>
<nav class="md-post__action">
<a href="../../programming/2018/04/07/thoughts-on-stanford-cs140e-7/">
        继续阅读
      </a>
</nav>
</div>
</article>
<article class="md-post md-post--excerpt">
<header class="md-post__header">
<div class="md-post__meta md-meta">
<ul class="md-meta__list">
<li class="md-meta__item">
<time datetime="2018-03-26 00:00:00">2018年3月26日</time></li>
<li class="md-meta__item">
            分类于
            
              <a class="md-meta__link" href="../../category/others/">others</a></li>
<li class="md-meta__item">
            
              需要 1 分钟阅读时间
            
          </li>
</ul>
</div>
</header>
<div class="md-post__content md-typeset">
<h2 id="_1"><a class="toclink" href="../../others/2018/03/26/busy-these-days/">最近比较忙</a></h2>
<p>最近一直没有更新我的 CS140e 系列文章，是因为最近一直忙于各种事情。等有空了再更新吧。</p>
<nav class="md-post__action">
<a href="../../others/2018/03/26/busy-these-days/">
        继续阅读
      </a>
</nav>
</div>
</article>
<article class="md-post md-post--excerpt">
<header class="md-post__header">
<div class="md-post__meta md-meta">
<ul class="md-meta__list">
<li class="md-meta__item">
<time datetime="2018-03-08 00:00:00">2018年3月8日</time></li>
<li class="md-meta__item">
            分类于
            
              <a class="md-meta__link" href="../../category/others/">others</a></li>
<li class="md-meta__item">
            
              需要 3 分钟阅读时间
            
          </li>
</ul>
</div>
</header>
<div class="md-post__content md-typeset">
<h2 id="_1"><a class="toclink" href="../../others/2018/03/08/encountering-wu-wenhu/">偶遇清华吴文虎教授</a></h2>
<p>今天百团大战，正准备收摊的时候，天空工场那边来了一位长者，在和他们聊着什么。我很感兴趣，就上去听。老人大概已有八十高龄（后来查，是 1936 年生），但依然精神矍铄，首先和我们讲，作为工科的学生，一定在理解原理的基础上，多多去实践。他举了他自己的例子，他首先在电机系学习，后来，计算机系成立（当时还是自动控制系），他转到了计算机系，重新学起了计算机，说计算机编程学起来并没有什么难的。当年，苹果公司送过来了中国第一台 Apple-2，他们就把电脑拆了下来研究原理，又装上去继续工作。后来，他就在计算机系任教，教的正是《程序设计基础》这门课程。他十分重视实践，在第一年开课的时候就说，最关键的就是实践，安排了一些编程实验课，期中期末就是大作业。一开始有一些同学不重视实践，结果期末就挂科了。后来同学们就明白了实践的重要性，实践起来发现并没有那么难，最后就说，“吴老师，你说得对”。他又谈到了他的体育，他当年是北京长跑代表队的集训队选手，擅长一千五百米项目，他三千米只需要九分钟就能跑完。我们都感到自愧不如。我们说，现在的《程序设计基础》是徐明星老师在教，他说徐明星是他的博士生，邬晓钧也是他的博士生，他另外还有一个高徒我记不清楚了。他还是 IOI 中国队的前教练，听到我们有过一些 OI 基础，表示了赞许和鼓励。还有一些细节记不清楚了，记起来了再补充吧。</p>
<nav class="md-post__action">
<a href="../../others/2018/03/08/encountering-wu-wenhu/">
        继续阅读
      </a>
</nav>
</div>
</article>
<article class="md-post md-post--excerpt">
<header class="md-post__header">
<div class="md-post__meta md-meta">
<ul class="md-meta__list">
<li class="md-meta__item">
<time datetime="2018-03-07 00:00:00">2018年3月7日</time></li>
<li class="md-meta__item">
            分类于
            
              <a class="md-meta__link" href="../../category/programming/">programming</a></li>
<li class="md-meta__item">
            
              需要 2 分钟阅读时间
            
          </li>
</ul>
</div>
</header>
<div class="md-post__content md-typeset">
<h2 id="c"><a class="toclink" href="../../programming/2018/03/07/breaking-c-weak-access-control/">〖新手向〗绕过 C++ 类的访问限制</a></h2>
<p>这是一篇很水的文章，面向萌新，已经知道了的可以自觉绕道。</p>
<p>昨天上课，有同学问，如果用户偷偷把 <code>private</code> 改成 <code>public</code> 再和原有的库链接，是不是就可以在用户代码里更改了。这个答案是肯定的。下面我们就做个实验：</p>
<p>首先，创建 good_class.h 和 good_class.cpp:</p>
<div class="language-c++ highlight"><pre><span></span><code><span id="__span-0-1"><a href="../../programming/2018/03/07/breaking-c-weak-access-control/#__codelineno-0-1" id="__codelineno-0-1" name="__codelineno-0-1"></a><span class="k">class</span><span class="w"> </span><span class="nc">SomeClass</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-0-2"><a href="../../programming/2018/03/07/breaking-c-weak-access-control/#__codelineno-0-2" id="__codelineno-0-2" name="__codelineno-0-2"></a><span class="k">private</span><span class="o">:</span>
</span><span id="__span-0-3"><a href="../../programming/2018/03/07/breaking-c-weak-access-control/#__codelineno-0-3" id="__codelineno-0-3" name="__codelineno-0-3"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">data</span><span class="p">;</span>
</span><span id="__span-0-4"><a href="../../programming/2018/03/07/breaking-c-weak-access-control/#__codelineno-0-4" id="__codelineno-0-4" name="__codelineno-0-4"></a><span class="k">public</span><span class="o">:</span>
</span><span id="__span-0-5"><a href="../../programming/2018/03/07/breaking-c-weak-access-control/#__codelineno-0-5" id="__codelineno-0-5" name="__codelineno-0-5"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">getData</span><span class="p">();</span>
</span><span id="__span-0-6"><a href="../../programming/2018/03/07/breaking-c-weak-access-control/#__codelineno-0-6" id="__codelineno-0-6" name="__codelineno-0-6"></a><span class="p">};</span>
</span></code></pre></div>
<div class="language-c++ highlight"><pre><span></span><code><span id="__span-1-1"><a href="../../programming/2018/03/07/breaking-c-weak-access-control/#__codelineno-1-1" id="__codelineno-1-1" name="__codelineno-1-1"></a><span class="cp">##include "good_class.h"</span>
</span><span id="__span-1-2"><a href="../../programming/2018/03/07/breaking-c-weak-access-control/#__codelineno-1-2" id="__codelineno-1-2" name="__codelineno-1-2"></a>
</span><span id="__span-1-3"><a href="../../programming/2018/03/07/breaking-c-weak-access-control/#__codelineno-1-3" id="__codelineno-1-3" name="__codelineno-1-3"></a><span class="kt">int</span><span class="w"> </span><span class="nf">SomeClass::getData</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-1-4"><a href="../../programming/2018/03/07/breaking-c-weak-access-control/#__codelineno-1-4" id="__codelineno-1-4" name="__codelineno-1-4"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">data</span><span class="p">;</span>
</span><span id="__span-1-5"><a href="../../programming/2018/03/07/breaking-c-weak-access-control/#__codelineno-1-5" id="__codelineno-1-5" name="__codelineno-1-5"></a><span class="p">}</span>
</span></code></pre></div>
<p>然后，首先编译，</p>
<div class="language-shell highlight"><pre><span></span><code><span id="__span-2-1"><a href="../../programming/2018/03/07/breaking-c-weak-access-control/#__codelineno-2-1" id="__codelineno-2-1" name="__codelineno-2-1"></a>clang++<span class="w"> </span>-c<span class="w"> </span>good_class.cpp<span class="w"> </span>-o<span class="w"> </span>good_class.o
</span></code></pre></div>
<p>然后，修改 good_class.cpp 并写一个 evil_user.cpp</p>
<div class="language-c++ highlight"><pre><span></span><code><span id="__span-3-1"><a href="../../programming/2018/03/07/breaking-c-weak-access-control/#__codelineno-3-1" id="__codelineno-3-1" name="__codelineno-3-1"></a><span class="k">class</span><span class="w"> </span><span class="nc">SomeClass</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-3-2"><a href="../../programming/2018/03/07/breaking-c-weak-access-control/#__codelineno-3-2" id="__codelineno-3-2" name="__codelineno-3-2"></a><span class="k">public</span><span class="o">:</span>
</span><span id="__span-3-3"><a href="../../programming/2018/03/07/breaking-c-weak-access-control/#__codelineno-3-3" id="__codelineno-3-3" name="__codelineno-3-3"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">data</span><span class="p">;</span>
</span><span id="__span-3-4"><a href="../../programming/2018/03/07/breaking-c-weak-access-control/#__codelineno-3-4" id="__codelineno-3-4" name="__codelineno-3-4"></a><span class="k">public</span><span class="o">:</span>
</span><span id="__span-3-5"><a href="../../programming/2018/03/07/breaking-c-weak-access-control/#__codelineno-3-5" id="__codelineno-3-5" name="__codelineno-3-5"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">getData</span><span class="p">();</span>
</span><span id="__span-3-6"><a href="../../programming/2018/03/07/breaking-c-weak-access-control/#__codelineno-3-6" id="__codelineno-3-6" name="__codelineno-3-6"></a><span class="p">};</span>
</span></code></pre></div>
<div class="language-c++ highlight"><pre><span></span><code><span id="__span-4-1"><a href="../../programming/2018/03/07/breaking-c-weak-access-control/#__codelineno-4-1" id="__codelineno-4-1" name="__codelineno-4-1"></a><span class="cp">##include &lt;stdio.h&gt;</span>
</span><span id="__span-4-2"><a href="../../programming/2018/03/07/breaking-c-weak-access-control/#__codelineno-4-2" id="__codelineno-4-2" name="__codelineno-4-2"></a><span class="cp">##include "good_class.h"</span>
</span><span id="__span-4-3"><a href="../../programming/2018/03/07/breaking-c-weak-access-control/#__codelineno-4-3" id="__codelineno-4-3" name="__codelineno-4-3"></a>
</span><span id="__span-4-4"><a href="../../programming/2018/03/07/breaking-c-weak-access-control/#__codelineno-4-4" id="__codelineno-4-4" name="__codelineno-4-4"></a><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-4-5"><a href="../../programming/2018/03/07/breaking-c-weak-access-control/#__codelineno-4-5" id="__codelineno-4-5" name="__codelineno-4-5"></a><span class="w">    </span><span class="n">SomeClass</span><span class="w"> </span><span class="n">a</span><span class="p">;</span>
</span><span id="__span-4-6"><a href="../../programming/2018/03/07/breaking-c-weak-access-control/#__codelineno-4-6" id="__codelineno-4-6" name="__codelineno-4-6"></a><span class="w">    </span><span class="n">a</span><span class="p">.</span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">37</span><span class="p">;</span>
</span><span id="__span-4-7"><a href="../../programming/2018/03/07/breaking-c-weak-access-control/#__codelineno-4-7" id="__codelineno-4-7" name="__codelineno-4-7"></a><span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">"%d</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span><span class="w"> </span><span class="n">a</span><span class="p">.</span><span class="n">getData</span><span class="p">());</span>
</span><span id="__span-4-8"><a href="../../programming/2018/03/07/breaking-c-weak-access-control/#__codelineno-4-8" id="__codelineno-4-8" name="__codelineno-4-8"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</span><span id="__span-4-9"><a href="../../programming/2018/03/07/breaking-c-weak-access-control/#__codelineno-4-9" id="__codelineno-4-9" name="__codelineno-4-9"></a><span class="p">}</span>
</span></code></pre></div>
<p>编译：</p>
<div class="language-shell highlight"><pre><span></span><code><span id="__span-5-1"><a href="../../programming/2018/03/07/breaking-c-weak-access-control/#__codelineno-5-1" id="__codelineno-5-1" name="__codelineno-5-1"></a>clang++<span class="w"> </span>good_class.o<span class="w"> </span>evil_user.cpp<span class="w"> </span>-o<span class="w"> </span>evil
</span></code></pre></div>
<p>然后 <code>evil</code> 如愿地输出了 <code>37</code> 。</p>
<p>一些提醒：</p>
<ol>
<li><code>C++</code> 的访问控制十分的弱，仅仅是编译期。所以是很容易绕过的。</li>
<li>对于不想泄露源代码的库，不要导出 <code>C++</code> 的类和函数。选择导出 <code>C</code> 函数，结构体用 incomplete type 或者干脆 <code>void *</code> 。</li>
</ol>
<p>扩展阅读： <a href="https://liam0205.me/2018/01/23/crack-private-member-function-by-vtable/">L 叔的通过虚函数表访问私有函数</a> 。</p>
<nav class="md-post__action">
<a href="../../programming/2018/03/07/breaking-c-weak-access-control/">
        继续阅读
      </a>
</nav>
</div>
</article>
<article class="md-post md-post--excerpt">
<header class="md-post__header">
<div class="md-post__meta md-meta">
<ul class="md-meta__list">
<li class="md-meta__item">
<time datetime="2018-03-05 00:00:00">2018年3月5日</time></li>
<li class="md-meta__item">
            分类于
            
              <a class="md-meta__link" href="../../category/programming/">programming</a></li>
<li class="md-meta__item">
            
              需要 2 分钟阅读时间
            
          </li>
</ul>
</div>
</header>
<div class="md-post__content md-typeset">
<h2 id="stanford-cs140e-6"><a class="toclink" href="../../programming/2018/03/05/thoughts-on-stanford-cs140e-6/">近来做 Stanford CS140e 的一些进展和思考（6）</a></h2>
<p>在<a href="../../programming/2018/03/03/thoughts-on-stanford-cs140e-5/">上一篇文章</a>之后，作者终于更新了测试的用例，我的程序终于可以成功跑过所有测试，也成功在树莓派跑起来。不过，我的代码中很多地方的错误处理比较偷懒，往往直接 <code>panic</code> ，显然并不友好。同时，我想到了使用 <a href="https://github.com/rust-fuzz/cargo-fuzz">cargo-fuzz</a> 来进行自动化测试，果然，使用这个很快就修复了不少我没想到的会出错的地方，比如乘法溢出，目录项没有正确结束等等。目前还发现一个 <code>timeout</code> 的问题，研究发现大概是文件的 <code>cluster chain</code> 中出现了环，导致一直读取文件而没有停止。要解决这个问题，我目前想到的是 <code>Floyd</code> 的判圈算法，但还没上实现。等过几天，新的 <code>Assignment 3</code> 出了以后，再继续更新。希望作者少点跳票，多点勤奋，哈哈哈哈哈</p>
<p>更新：<a href="../../programming/2018/04/07/thoughts-on-stanford-cs140e-7/">下一篇在这里</a>。</p>
<nav class="md-post__action">
<a href="../../programming/2018/03/05/thoughts-on-stanford-cs140e-6/">
        继续阅读
      </a>
</nav>
</div>
</article>
<article class="md-post md-post--excerpt">
<header class="md-post__header">
<div class="md-post__meta md-meta">
<ul class="md-meta__list">
<li class="md-meta__item">
<time datetime="2018-03-03 00:00:00">2018年3月3日</time></li>
<li class="md-meta__item">
            分类于
            
              <a class="md-meta__link" href="../../category/programming/">programming</a></li>
<li class="md-meta__item">
            
              需要 4 分钟阅读时间
            
          </li>
</ul>
</div>
</header>
<div class="md-post__content md-typeset">
<h2 id="stanford-cs140e-5"><a class="toclink" href="../../programming/2018/03/03/thoughts-on-stanford-cs140e-5/">近来做 Stanford CS140e 的一些进展和思考（5）</a></h2>
<p>在<a href="../../programming/2018/02/27/thoughts-on-stanford-cs140e-4/">上一篇文章</a>之后，作者多次延期跳票之后（again），终于放出了 <code>Assignment 2 Phase 3: Saddle Up</code> 。这次，我们要做的变成了把已经写好的（错漏百出）的 <code>fat32</code> 的驱动搬到树莓派里面去，然后实现一些基本的 <code>shell</code> 命令： <code>ls</code> <code>cat</code> <code>cd</code> 等等。作者首先更新了老版本的新的测试样例，放了一些映像然后提供了预期的结果，结果发现，这里的 <code>fat32</code> 有一些不同，主要的就是 <code>bytes_per_sector</code> 不是 <code>512</code> 了，意味着物理的扇区和逻辑扇区并不一致。同时， <code>sectors_per_cluster</code> 也不是 <code>1</code> 了，需要考虑多个扇区的情况。同时， <code>read_cluster</code> 传入的 <code>offset</code> 也可能不再是第一个 <code>sector</code> 中的，所以需要做一个处理。对于物理和逻辑扇区的问题，作者推荐的方案是，把 <code>fat32</code> 之外的扇区保持不变，把其内的扇区视为逻辑扇区。这样，其它代码都可以透明地工作，而不用到处更改，这就体现了封装的威力。接着，作者提供了一个写好了的 <code>libsd</code> 和一些导出的函数，使用这些函数即可。不过，在错误处理和 <code>timeout</code> 上也遇到了一些坑。后面，把东西搬到树莓派上运行，问题就出现了：读取了第一个扇区（即 <code>MBR</code> 所在的扇区）之后，直接就死掉了。想了半天都没找到方案，突然想起可以利用 <code>panic!</code> 对错误语句进行二分查找。查找了大概有七八个小时之后，终于发现，问题出现在读取一个 <code>u32</code> 类型的变量上。我起初怀疑是栈出了问题，所以放到堆上分配，然而还是不行。忽然想起以前遇到的对齐问题，在 <code>AArch64</code> 架构上，可能为了简化，读取的 <code>u32</code> 必须对齐到四个字节上。于是找了找 <code>Rust</code> 中的对齐方面的文档，找到了 <code>#[repr(align=4)]</code> 这种表示方法，代替了原来的 <code>#[repr(packed)]</code> ，并且把数据先拷贝到对齐后的栈上的对应数据结构，然后再读取对应的项。果然，这个问题就解决了。然后又发现我的盘中会出现 <code>lfn</code> 项并不是从后往前的情况，于是我又修改了一下相关的代码。现在，终于可以成功地 <code>ls</code> <code>cat</code> <code>cd</code> 。</p>
<p>不过还是要吐槽一下，作者的测试用的映像文件中，会出现 <code>0xE5</code> 表示这个项已经被删除的情况，但是似乎作者的代码并没有处理这个，所以在预期的输出中出现了一些明显不正确的结果，导致我的代码跑测试并不能通过。而且，作者的代码在一些情况下会把文件的后缀漏掉。作者后来更新了几次测试的文件，不过这个问题只解决了一部分，并没有完全解决。坐等作者继续放出新的测试文件吧。</p>
<p>更新：<a href="../../programming/2018/03/05/thoughts-on-stanford-cs140e-6/">下一篇在这里</a>。</p>
<nav class="md-post__action">
<a href="../../programming/2018/03/03/thoughts-on-stanford-cs140e-5/">
        继续阅读
      </a>
</nav>
</div>
</article>
<article class="md-post md-post--excerpt">
<header class="md-post__header">
<div class="md-post__meta md-meta">
<ul class="md-meta__list">
<li class="md-meta__item">
<time datetime="2018-02-27 00:00:00">2018年2月27日</time></li>
<li class="md-meta__item">
            分类于
            
              <a class="md-meta__link" href="../../category/programming/">programming</a></li>
<li class="md-meta__item">
            
              需要 3 分钟阅读时间
            
          </li>
</ul>
</div>
</header>
<div class="md-post__content md-typeset">
<h2 id="stanford-cs140e-4"><a class="toclink" href="../../programming/2018/02/27/thoughts-on-stanford-cs140e-4/">近来做 Stanford CS140e 的一些进展和思考（4）</a></h2>
<p>在<a href="../../programming/2018/02/16/thoughts-on-stanford-cs140e-3/">上一篇文章</a>之后，作者多次延期跳票之后，终于放出了 <code>Assignment 2 Phase 2:32-bit Lipids</code> ，这两天就把只读 <code>FAT32</code> 写完了（不过封装得并不好，许多地方利用了 <code>pub(super)</code> 把变量可以访问的范围控制到 <code>vfat</code> 中，然后直接读，只有少数需要特殊处理的进行了函数的封装）。首先当然是研究了半天 <code>MBR</code> 和 <code>FAT32</code> 的结构，拿了不同来源的 <code>FAT</code> 结构说明进行对比和验证，最后终于把格式搞清楚了，先实现了 <code>MasterBootRecord</code> ，这个其实很好实现，以前也有接触过 <code>MBR</code> ，本身也很简单。然后就是根据 <code>MBR</code> 找到第一个 <code>FAT32</code> 的分区，根据偏移找到分区的开头，开头的第一个扇区就是 <code>EBPB</code> 数据结构，里面保存了 <code>FAT32</code> 分区的各种信息。根据里面的信息，可以找到 <code>FAT</code> 表的位置和数量，还有数据部分的 <code>Cluster</code> 的位置和数量。接着，解析一下 <code>FAT</code> 表，实际上是一个与 <code>Cluster</code> 一一对应的链表结构，用特殊的数据代表链表的尾和空、坏扇区。利用这些，和 <code>EBPB</code> 中根目录所在的第一个 <code>Cluster</code> ，先在 <code>VFat</code> 里面实现了读取一个 <code>Cluster</code> 链的内容的函数，利用这个函数读取一个一个的目录项，解析目录项，把长文件名的项合并到一个之中，然后对应地丢到 <code>Entry</code> 对象中，目录则可以枚举子目录项，根据名字比较去找子目录或者子文件夹，文件则实现了 <code>io::Read</code>和 <code>io::Seek</code> 使得可以读取文件的内容。实现好了这些以后，就拿了 <code>raspbian-strech-lite.img</code> 作为硬盘映像，从文件里读取文件信息，成功地把 <code>config.txt</code> 读取出来。</p>
<p>其中还是遇到许多困难，如各种偏移的计算，如何处理跨 <code>Cluster</code> 和跨 <code>Sector</code> 的读写，等等，有不少的坑在其中，花了两天的空余时间才差不多完善了这个功能。还有就是利用 <code>Rust</code> 现有的功能完成 <code>C</code> 里面很轻易就可以实现的指针操作，也花了不少时间。</p>
<p>更新：<a href="../../programming/2018/03/03/thoughts-on-stanford-cs140e-5/">下一篇在这里</a>。</p>
<nav class="md-post__action">
<a href="../../programming/2018/02/27/thoughts-on-stanford-cs140e-4/">
        继续阅读
      </a>
</nav>
</div>
</article>
<nav class="md-pagination">
<a class="md-pagination__link" href="../..">1</a> <span class="md-pagination__dots">..</span> <a class="md-pagination__link" href="../30/">30</a> <a class="md-pagination__link" href="../31/">31</a> <span class="md-pagination__current">32</span> <a class="md-pagination__link" href="../33/">33</a> <a class="md-pagination__link" href="../34/">34</a> <span class="md-pagination__dots">..</span> <a class="md-pagination__link" href="../36/">36</a>
</nav>
</div>
</div>
</div>
</main>
<footer class="md-footer">
<nav aria-label="页脚" class="md-footer__inner md-grid">
<a aria-label="下一页: 关于" class="md-footer__link md-footer__link--next" href="../../about/" rel="next">
<div class="md-footer__title">
<span class="md-footer__direction">
                下一页
              </span>
<div class="md-ellipsis">
                关于
              </div>
</div>
<div class="md-footer__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"></path></svg>
</div>
</a>
</nav>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
      Material for MkDocs
    </a>
</div>
<div class="md-social">
<a class="md-social__link" href="https://github.com/jiegec" rel="noopener" target="_blank" title="github.com">
<svg viewbox="0 0 496 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg>
</a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tracking", "navigation.tabs", "navigation.tabs.sticky", "navigation.sections", "navigation.footer", "content.code.copy", "toc.follow", "toc.integrate"], "search": "../../assets/javascripts/workers/search.780af0f4.min.js", "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}}</script>
<script src="../../assets/javascripts/bundle.f11ae8b1.min.js"></script>
<script src="../../javascripts/mathjax.js"></script>
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/wavedrom/3.1.0/skins/default.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/wavedrom/3.1.0/wavedrom.min.js"></script>
</body>
</html>