<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
 <title>Tag - container</title>
 <link href="https://jiege.ch/tag/container/index.xml" rel="self"/>
 <link href="https://jiege.ch/tag/container.html"/>
 <updated>2019-04-27T08:38:45+08:00</updated>
 <id>https://jiege.ch/tag/container.html</id>
 <author>
   <name>Jiege Chen</name>
 </author>
 
 <entry>
   <title>通过 systemd-run 直接在容器中执行命令</title>
   <link href="https://jiege.ch/devops/2018/07/06/run-command-in-container-directly/"/>
   <updated>2018-07-06T15:56:00+08:00</updated>
   <id>https://jiege.ch/devops/2018/07/06/run-command-in-container-directly</id>
   <content type="html">&lt;p&gt;之前使用 &lt;code class=&quot;highlighter-rouge&quot;&gt;systemd-nspawn&lt;/code&gt; 开了容器，然后通过 &lt;code class=&quot;highlighter-rouge&quot;&gt;machinectl shell&lt;/code&gt; 进去，想要起一个服务然后丢到后台继续执行，但是发现离开这个 session 后这个进程总是会被杀掉，于是找了 &lt;code class=&quot;highlighter-rouge&quot;&gt;systemd-run&lt;/code&gt; 的方案，即：&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;systemd-run &lt;span class=&quot;nt&quot;&gt;--machine&lt;/span&gt; machine_name_here absolute_path_to_executable args_here
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;这样可以直接在容器中跑服务，而且用这个命令输出的临时 server 名称，还可以看到日志：&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;journalctl &lt;span class=&quot;nt&quot;&gt;--machine&lt;/span&gt; machine_name_here &lt;span class=&quot;nt&quot;&gt;-u&lt;/span&gt; unit_name_above
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</content>
 </entry>
 
</feed>
