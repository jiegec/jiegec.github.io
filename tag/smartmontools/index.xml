<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
 <title>Tag - smartmontools</title>
 <link href="https://jiege.ch/tag/smartmontools/index.xml" rel="self"/>
 <link href="https://jiege.ch/tag/smartmontools.html"/>
 <updated>2019-04-15T17:55:24+08:00</updated>
 <id>https://jiege.ch/tag/smartmontools.html</id>
 <author>
   <name>Jiege Chen</name>
 </author>
 
 <entry>
   <title>在 macOS 上读取移动硬盘的 S.M.A.R.T. 信息</title>
   <link href="https://jiege.ch/hardware/2018/09/07/reading-smart-info-of-external-drives-under-macOS/"/>
   <updated>2018-09-07T10:20:00+08:00</updated>
   <id>https://jiege.ch/hardware/2018/09/07/reading-smart-info-of-external-drives-under-macOS</id>
   <content type="html">&lt;p&gt;之前想看看自己各个盘的情况，但是发现只能看电脑内置的 SSD 的 S.M.A.R.T 信息，而移动硬盘的都显示：&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ smartctl -a /dev/disk2
smartctl 6.6 2017-11-05 r4594 [Darwin 17.7.0 x86_64] (local build)
Copyright (C) 2002-17, Bruce Allen, Christian Franke, www.smartmontools.org

/dev/disk2: Unable to detect device type
Please specify device type with the -d option.

Use smartctl -h to get a usage summary
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;一开始我怀疑是个别盘不支持，但换了几个盘都不能工作，问题应该出现在了 USB 上。查了下资料，果然如此。根据 &lt;a href=&quot;https://www.smartmontools.org/wiki/USB&quot;&gt;USB devices and smartmontools&lt;/a&gt; ，获取 S.M.A.R.T 信息需要直接发送 ATA 命令，但是由于经过了 USB ，于是需要进行一个转换，导致无法直接发送 ATA 命令。这个问题自然是有解决方案，大概就是直接把 ATA 命令发送过去（pass-through）。上面这个地址里写到，如果需要在 macOS 上使用，需要安装一个内核驱动。可以找到，源码在 &lt;a href=&quot;https://github.com/kasbert/OS-X-SAT-SMART-Driver&quot;&gt;kasbert/OS-X-SAT-SMART-Driver&lt;/a&gt; 并且有一个带签名的安装包在 &lt;a href=&quot;https://binaryfruit.com/drivedx/usb-drive-support&quot;&gt;External USB / FireWire drive diagnostics support&lt;/a&gt; 中可以下载。丢到 VirusTotal 上没查出问题，用 v0.8 版本安装好后就成功地读取到了移动硬盘的 S.M.A.R.T 信息了。&lt;/p&gt;

&lt;p&gt;然后我又简单研究了一下各个 S.M.A.R.T 各个值的含义是什么。 &lt;code class=&quot;highlighter-rouge&quot;&gt;VALUE&lt;/code&gt; 代表当前的值， &lt;code class=&quot;highlighter-rouge&quot;&gt;WORST&lt;/code&gt; 代表目前检测到的最差的值， &lt;code class=&quot;highlighter-rouge&quot;&gt;THRESH&lt;/code&gt; 代表损坏阈值。这些值都是从 &lt;code class=&quot;highlighter-rouge&quot;&gt;RAW_VALUE&lt;/code&gt; 进行计算后归一化而来。然后 &lt;code class=&quot;highlighter-rouge&quot;&gt;TYPE&lt;/code&gt; 分为两种，一是 &lt;code class=&quot;highlighter-rouge&quot;&gt;Pre-fail&lt;/code&gt; ，代表如果这一项的值小于阈值，代表这个机器很危险了，赶紧拷数据丢掉吧。二是 &lt;code class=&quot;highlighter-rouge&quot;&gt;Old_age&lt;/code&gt; ，代表如果这一项小于阈值，代表这个机器比较老了，但还没坏。真正要看是否坏了，可以看 &lt;code class=&quot;highlighter-rouge&quot;&gt;When_Failed&lt;/code&gt; 一栏。&lt;/p&gt;
</content>
 </entry>
 
</feed>
