<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
 <title>Tag - static</title>
 <link href="https://jiege.ch/tag/static/index.xml" rel="self"/>
 <link href="https://jiege.ch/tag/static.html"/>
 <updated>2019-04-15T17:55:24+08:00</updated>
 <id>https://jiege.ch/tag/static.html</id>
 <author>
   <name>Jiege Chen</name>
 </author>
 
 <entry>
   <title>静态编译 sqlite3</title>
   <link href="https://jiege.ch/software/2019/03/24/static-building-sqlite/"/>
   <updated>2019-03-24T19:13:00+08:00</updated>
   <id>https://jiege.ch/software/2019/03/24/static-building-sqlite</id>
   <content type="html">&lt;p&gt;最近 rCore 支持了动态链接库，于是想着在测试 sqlite 的时候直接用动态的，不过出现了玄学的问题，它会访问一个不存在的地址，看代码也没看出个所以然来。所以研究了一下 sqlite 的静态编译。首先在 &lt;code class=&quot;highlighter-rouge&quot;&gt;configure&lt;/code&gt; 的时候尝试了一下：&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;./configure &lt;span class=&quot;nv&quot;&gt;CC&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;x86_64-linux-musl-gcc &lt;span class=&quot;nt&quot;&gt;--disable-shared&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--enabled-static&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;发现 &lt;code class=&quot;highlighter-rouge&quot;&gt;libsqlite&lt;/code&gt; 确实是静态了，但是 &lt;code class=&quot;highlighter-rouge&quot;&gt;sqlite3&lt;/code&gt; 并不是。一番研究以后，发现是 &lt;code class=&quot;highlighter-rouge&quot;&gt;libtool&lt;/code&gt; 的原因，只要这样编译：&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;make &lt;span class=&quot;nv&quot;&gt;LTLINK_EXTRAS&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;-all-static&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;就可以编译出静态的 &lt;code class=&quot;highlighter-rouge&quot;&gt;sqlite3&lt;/code&gt; ：&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;sqlite3: ELF 64-bit LSB executable, x86-64, version 1 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;SYSV&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;, statically linked, with debug_info, not stripped
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

</content>
 </entry>
 
</feed>
