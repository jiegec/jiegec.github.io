<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
 <title>Tag - C++</title>
 <link href="https://jiegec.me/tag/c++/index.xml" rel="self"/>
 <link href="https://jiegec.me/tag/C++.html"/>
 <updated>2018-05-20T16:54:18+08:00</updated>
 <id>https://jiegec.me/tag/C++.html</id>
 <author>
   <name>Jiege Chen</name>
 </author>
 
 <entry>
   <title>Run Cpp In Jupyter Notebook</title>
   <link href="https://jiegec.me/programming/2017/11/30/run-cpp-in-jupyter-notebook/"/>
   <updated>2017-11-30T18:07:10+08:00</updated>
   <id>https://jiegec.me/programming/2017/11/30/run-cpp-in-jupyter-notebook</id>
   <content type="html">&lt;p&gt;刚刚在HN上看到了这么一个文章：&lt;a href=&quot;https://blog.jupyter.org/interactive-workflows-for-c-with-jupyter-fe9b54227d92&quot;&gt;Interactive Workflows for C++ with Jupyter&lt;/a&gt; &lt;a href=&quot;https://news.ycombinator.com/item?id=15808809&quot;&gt;HN&lt;/a&gt; ，终于可以在Jupyter Notebook里跑C++代码了，很开心，于是开始自己研究了起来怎么本地跑。&lt;/p&gt;

&lt;p&gt;首先当然是更新一波jupyter，安装一波cling：&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;pip3 install &lt;span class=&quot;nt&quot;&gt;-U&lt;/span&gt; jupyter
brew install cling
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;然后根据&lt;a href=&quot;https://github.com/root-project/cling/tree/master/tools/Jupyter&quot;&gt;官方教程&lt;/a&gt;里的要求执行：&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;cd&lt;/span&gt; /usr/local/share/cling/Jupyter/kernel
pip3 install &lt;span class=&quot;nt&quot;&gt;-e&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt;
jupyter kernelspec install cling-cpp11
jupyter kernelspec install cling-cpp14
jupyter kernelspec install cling-cpp17
jupyter kernelspec install cling-cpp1z
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;结果发现找不到&lt;code class=&quot;highlighter-rouge&quot;&gt;jupyter-kernelspec&lt;/code&gt;，遂重装了一下&lt;code class=&quot;highlighter-rouge&quot;&gt;jupyter-client&lt;/code&gt;这个包，果然就可以了。打开一个notebook测试：&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;jupyter notebook
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;然后创建一个C++14的Notebook，结果发现一直Kernel rebooting，错误信息是说找不到&lt;code class=&quot;highlighter-rouge&quot;&gt;../Cellar/cling/0.5/lib/libclingJupyter.dylib&lt;/code&gt;。这一看就是路径处理的问题，当前目录肯定不是&lt;code class=&quot;highlighter-rouge&quot;&gt;/usr/local&lt;/code&gt;，肯定出现了什么问题，然后研究发现&lt;code class=&quot;highlighter-rouge&quot;&gt;cling-kernel.py&lt;/code&gt;中对&lt;code class=&quot;highlighter-rouge&quot;&gt;cling&lt;/code&gt;判断是否是个连接，如果是连接则按照连接去找&lt;code class=&quot;highlighter-rouge&quot;&gt;cling&lt;/code&gt;的安装目录，但是！没有考虑到这个连接是个相对路径的问题（Homebrew你背锅吗）。于是我愉快地改了代码并提交了&lt;a href=&quot;https://github.com/root-project/cling/pull/198&quot;&gt;PR&lt;/a&gt;。修复了以后就可以用了。&lt;/p&gt;

&lt;p&gt;以下是一个小小的例子：&lt;/p&gt;
&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; jupyter console &lt;span class=&quot;nt&quot;&gt;--kernel&lt;/span&gt; cling-cpp14
Jupyter console 5.2.0

cling-X


In &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;1]: &lt;span class=&quot;c&quot;&gt;#include &amp;lt;stdio.h&amp;gt;&lt;/span&gt;
Out[1]:

In &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;2]: char &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;s &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Hello, world!&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
input_line_4:2:12: warning: ISO C++11 does not allow conversion from string literal to &lt;span class=&quot;s1&quot;&gt;'char *'&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;-Wwritable-strings&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;
 char &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;s &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Hello, world!&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
           ^
Out[2]:

In &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;3]: &lt;span class=&quot;nb&quot;&gt;printf&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;%s&quot;&lt;/span&gt;,s&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
Hello, world!Out[3]:
&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;int&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; 13

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Okay，大功告成！&lt;/p&gt;
</content>
 </entry>
 
</feed>
