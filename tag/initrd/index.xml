<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
 <title>Tag - initrd</title>
 <link href="https://jiegec.me/tag/initrd/index.xml" rel="self"/>
 <link href="https://jiegec.me/tag/initrd.html"/>
 <updated>2018-10-07T23:19:43+08:00</updated>
 <id>https://jiegec.me/tag/initrd.html</id>
 <author>
   <name>Jiege Chen</name>
 </author>
 
 <entry>
   <title>构建简易的 initramfs</title>
   <link href="https://jiegec.me/os/2018/07/16/build-custom-initramfs/"/>
   <updated>2018-07-16T03:43:00+08:00</updated>
   <id>https://jiegec.me/os/2018/07/16/build-custom-initramfs</id>
   <content type="html">一直对 Linux 的启动很感兴趣，但对 initrd 和 initramfs 等概念不大了解，于是上网找了资料，自己成功地看到了现象。

参考资料：
[Build and boot a minimal Linux system with qemu](http://www.kaizou.org/2016/09/boot-minimal-linux-qemu/)
[Custom Initramfs](https://wiki.gentoo.org/wiki/Custom_Initramfs)
[initramfs vs initrd](https://dazdaztech.wordpress.com/2013/04/04/initrd-vs-initramfs/)
[ramfs, rootfs and initramfs](https://www.kernel.org/doc/Documentation/filesystems/ramfs-rootfs-initramfs.txt)
[The Kernel Newbie Corner: &quot;initrd&quot; and &quot;initramfs&quot;-- What's Up With That?](https://www.linux.com/learn/kernel-newbie-corner-initrd-and-initramfs-whats)

具体步骤：
```shell
$ cat hello.c
#include &lt;stdio.h&gt;
#include &lt;unistd.h&gt;

int main() {
    for (;;) {
        printf(&quot;Hello, world!\n&quot;);
    }
}
$ gcc -static hello.c -o init
$ echo init | cpio -o -H newc | gzip &gt; initrd
$ qemu-system-x86_64 -kernel /boot/vmlinuz-linux -initrd initrd -nographic -append 'console=ttyS0'
# Use C-a c q u i t &lt;Enter&gt; to exit
```

可以看到过一会（三四秒？），可以看到满屏的 Hello world 在输出。
</content>
 </entry>
 
</feed>
