<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>libvirt on 杰哥的{运维,编程,调板子}小笔记</title>
    <link>https://jia.je/tags/libvirt/</link>
    <description>Recent content in libvirt on 杰哥的{运维,编程,调板子}小笔记</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <lastBuildDate>Tue, 31 May 2022 09:22:00 +0800</lastBuildDate><atom:link href="https://jia.je/tags/libvirt/feed.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>在 libvirt 中运行 RISC-V 虚拟机</title>
      <link>https://jia.je/software/2022/05/31/qemu-rv64-in-libvirt/</link>
      <pubDate>Tue, 31 May 2022 09:22:00 +0800</pubDate>
      
      <guid>https://jia.je/software/2022/05/31/qemu-rv64-in-libvirt/</guid>
      <description>背景 我在 libvirt 中跑了几个 KVM 加速的虚拟机，然后突发奇想，既然 libvirt 背后是 qemu，然后 qemu 是支持跨指令集的，那是否可以让 libvirt 来运行 RISC-V 架构的虚拟机？经过一番搜索，发现可以跑 ARM：How To: Running Fedora-ARM under QEMU，既然如此，我们也可以试试用 libvirt 来运行 RV64 虚拟机。
准备 rootfs 第一步是根据 Debian 的文档 Creating a riscv64 chroot 来创建 rootfs，然后再用 virt-make-fs 来打包。
首先是用 mmdebstrap 来生成一个 chroot：
$ sudo mkdir -p /tmp/riscv64-chroot $ sudo apt install mmdebstrap qemu-user-static binfmt-support debian-ports-archive-keyring $ sudo mmdebstrap --architectures=riscv64 --include=&amp;#34;debian-ports-archive-keyring&amp;#34; sid /tmp/riscv64-chroot &amp;#34;deb http://deb.debian.org/debian-ports sid main&amp;#34; &amp;#34;deb http://deb.debian.org/debian-ports unreleased main&amp;#34; 进入 chroot 以后，进行一些配置：</description>
    </item>
    
  </channel>
</rss>
