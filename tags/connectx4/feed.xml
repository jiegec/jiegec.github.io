<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>connectx4 on 杰哥的{运维,编程,调板子}小笔记</title>
    <link>https://jia.je/tags/connectx4/</link>
    <description>Recent content in connectx4 on 杰哥的{运维,编程,调板子}小笔记</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <lastBuildDate>Sat, 02 Jul 2022 20:26:00 +0800</lastBuildDate><atom:link href="https://jia.je/tags/connectx4/feed.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>切换 ConnectX-4 为以太网模式</title>
      <link>https://jia.je/software/2022/07/02/connectx-4-switch-to-ethernet/</link>
      <pubDate>Sat, 02 Jul 2022 20:26:00 +0800</pubDate>
      
      <guid>https://jia.je/software/2022/07/02/connectx-4-switch-to-ethernet/</guid>
      <description>背景 最近在给机房配置网络，遇到一个需求，就是想要把 ConnectX-4 当成以太网卡用，它既支持 Infiniband，又支持 Ethernet，只不过默认是 Infiniband 模式，所以需要用 mlxconfig 工具来做这个切换。
切换方法 在 Using mlxconfig 文档中，写了如何切换网卡为 Infiniband 模式：
$ mlxconfig -d /dev/mst/mt4103_pci_cr0 set LINK_TYPE_P1=1 LINK_TYPE_P2=1 Device #1: ---------- Device type: ConnectX3Pro PCI device: /dev/mst/mt4103_pci_cr0 Configurations: Next Boot New LINK_TYPE_P1 ETH(2) IB(1) LINK_TYPE_P2 ETH(2) IB(1) Apply new Configuration? ? (y/n) [n] : y Applying... Done! -I- Please reboot machine to load new configurations. 那么，我们只需要反其道而行之，设置模式为 ETH(2) 即可。
MST 安装 要使用 mlxconfig，就需要安装 MFT(Mellanox Firmware Tools)。我们用的是 Debian bookworm，于是要下载 DEB：</description>
    </item>
    
  </channel>
</rss>
