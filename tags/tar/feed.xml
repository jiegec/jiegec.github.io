<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>tar on 杰哥的{运维,编程,调板子}小笔记</title>
    <link>https://jia.je/tags/tar/</link>
    <description>Recent content in tar on 杰哥的{运维,编程,调板子}小笔记</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <lastBuildDate>Tue, 23 May 2023 21:24:00 +0800</lastBuildDate><atom:link href="https://jia.je/tags/tar/feed.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Tar 文件格式</title>
      <link>https://jia.je/software/2023/05/23/tar-format/</link>
      <pubDate>Tue, 23 May 2023 21:24:00 +0800</pubDate>
      
      <guid>https://jia.je/software/2023/05/23/tar-format/</guid>
      <description>本文的内容已经整合到知识库中。
背景 最近在解压 tar.gz 文件的时候，发现如果用 unar 解压，就会出现文件名截断到 100 个字节的问题，而如果用 gnu tar 解压，文件名就是正常的，因此深入研究了一下 Tar 的文件格式。实际上，这是因为早期 tar 格式设计的时候，就设定了路径最长 100 字节的限制，后来的扩展解决了这个问题，但是 unar 没能正确地识别扩展，导致解压路径出错。
Tar 文件格式 Tar 的文件格式比较简单，就是一系列的 File Entry，最后是两个 512 字节的全 0，表示结束。每个 File Entry 由头部和数据组成，头部的格式是：
/* tar Header Block, from POSIX 1003.1-1990. */ /* POSIX header. */ struct posix_header { /* byte offset */ char name[100]; /* 0 */ char mode[8]; /* 100 */ char uid[8]; /* 108 */ char gid[8]; /* 116 */ char size[12]; /* 124 */ char mtime[12]; /* 136 */ char chksum[8]; /* 148 */ char typeflag; /* 156 */ char linkname[100]; /* 157 */ char magic[6]; /* 257 */ char version[2]; /* 263 */ char uname[32]; /* 265 */ char gname[32]; /* 297 */ char devmajor[8]; /* 329 */ char devminor[8]; /* 337 */ char prefix[155]; /* 345 */ /* 500 */ }; 来源：Basic Tar Format</description>
    </item>
    
  </channel>
</rss>
