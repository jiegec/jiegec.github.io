<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>unix on 杰哥的{运维,编程,调板子}小笔记</title>
    <link>https://jia.je/tags/unix/</link>
    <description>Recent content in unix on 杰哥的{运维,编程,调板子}小笔记</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <lastBuildDate>Mon, 10 Apr 2023 20:21:00 +0800</lastBuildDate><atom:link href="https://jia.je/tags/unix/feed.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>SCO OpenServer 6.0.0 虚拟机安装</title>
      <link>https://jia.je/system/2023/04/10/sco6/</link>
      <pubDate>Mon, 10 Apr 2023 20:21:00 +0800</pubDate>
      
      <guid>https://jia.je/system/2023/04/10/sco6/</guid>
      <description>安装过程 首先从 https://www.sco.com/support/update/download/product.php?pfid=12&amp;amp;prid=20 下载 SCO OpenServer 的安装 ISO。尝试过用 QEMU 启动，但是会卡在无法读取硬盘的错误上。
最后使用 VirtualBox 7.0.6 成功启动，注意创建虚拟机的时候不要给太多内存，例如 4GB 就起不来，2GB 可以。硬盘我也只给了 4GB 的空间。
安装过程中会询问 License number 和 License code，可以选择使用 Evaluation License，或者使用下面参考文档中提供的 License。按照流程一直走就可以了。如果重启出现无法 mount root 的问题，就 poweroff 再开机。
参考文档 本博客参考了以下文档中的命令：
https://virtuallyfun.com/2020/11/21/fun-with-openserver-6-and-mergepro/ </description>
    </item>
    
    <item>
      <title>UnixWare 7.1.4 虚拟机安装</title>
      <link>https://jia.je/system/2023/04/10/unixware7/</link>
      <pubDate>Mon, 10 Apr 2023 19:11:00 +0800</pubDate>
      
      <guid>https://jia.je/system/2023/04/10/unixware7/</guid>
      <description>安装过程 在 https://www.sco.com/support/update/download/product.php?pfid=1&amp;amp;prid=6 可以看到 UnixWare 7.1.4 的相关下载，其中首先要下载 UnixWare 的安装 ISO：https://www.sco.com/support/update/download/release.php?rid=346，尝试过用 QEMU 启动，会遇到找不到 CD-ROM 的问题，虽然通过设置 ATAPI_DMA_DISABLE=YES 解决了，但是又遇到了找不到硬盘的问题。
最后换成了 VirtualBox 7.0.6。用 VirtualBox 创建虚拟机的时候，不要给太多内存，4GB 就会无法启动，2GB 可以，硬盘也不要给太多，4GB 就足够。
剩下就是按照安装界面一路默认即可，License 可以选择 Defer，使用 Evaluation License。
关机以后，修改启动顺序，把硬盘放到 CD 前，然后启动，就可以进入系统了。如果重启出现无法 mount root 的问题，就 poweroff 再开机。
参考文档 本博客参考了以下文档中的命令：
https://virtuallyfun.com/2018/01/31/revisiting-a-unixware-7-1-1-install-on-qemu-kvm/ </description>
    </item>
    
    <item>
      <title>SCO OpenServer 5.0.7 虚拟机安装</title>
      <link>https://jia.je/system/2023/04/09/sco5/</link>
      <pubDate>Sun, 09 Apr 2023 23:03:00 +0800</pubDate>
      
      <guid>https://jia.je/system/2023/04/09/sco5/</guid>
      <description>安装过程 首先从 https://www.sco.com/support/update/download/release.php?rid=218 下载 SCO OpenServer 的安装 ISO 和从 https://www.sco.com/support/update/download/release.php?rid=187 下载 Supplement CD 5 ISO，然后用 QEMU 启动，这次需要用图形界面：
qemu-system-i386 -accel kvm -m 16384 -serial mon:stdio -drive file=sco-hdd.qcow2,if=ide -cdrom ../../ISOs/OpenServer-5.0.7Hw-10Jun05_1800.iso 安装过程中会询问 License number 和 License code，按照 https://virtuallyfun.com/2020/11/03/fun-with-openserver-and-merge/ 进行输入。
安装的时候，在 hard disk setup 那一步，记得关掉 bad tracking，否则会把整个盘扫一遍，我一开始建了 20GB 的 qcow2，结果这一步跑了一晚上，而且把 qcow2 撑满了。
安装后，重新启动，这次打开网络，同时挂载 Supplement CD 5 ISO：
qemu-system-i386 -accel kvm -m 16384 -serial chardev:mouse -drive file=sco-hdd.qcow2,if=ide -cdrom osr507suppcd5.iso -net nic -net tap,script=no,ifname=tap0 -chardev msmouse,id=mouse 启动以后，运行 custom 命令，然后从 CD-ROM 安装 Graphics and NIC Drivers。我尝试了安装 Maintenance Pack 5，但是启动以后会找不到硬盘，只好恢复之前的 qcow2 备份。可能是缺少了运行 /etc/conf/cf.</description>
    </item>
    
    <item>
      <title>AIX 7.2 虚拟机安装</title>
      <link>https://jia.je/system/2023/04/09/aix/</link>
      <pubDate>Sun, 09 Apr 2023 12:47:00 +0800</pubDate>
      
      <guid>https://jia.je/system/2023/04/09/aix/</guid>
      <description>安装过程 宿主机环境是 Debian bookworm，不需要像其他教程那样自己编译 qemu，直接 apt install 即可。
通过 google 可以搜索到 AIX 7.2 的 ISO，下载第一个 ISO 到本地，然后在 QEMU 中启动安装镜像：
qemu-img create -f qcow2 aix-hdd.qcow2 20G qemu-system-ppc64 -cpu POWER8 -machine pseries -m 16384 -serial mon:stdio -drive file=aix-hdd.qcow2,if=none,id=drive-virtio-disk0 -device virtio-scsi-pci,id=scsi -device scsi-hd,drive=drive-virtio-disk0 -cdrom aix_7200-04-02-2027_1of2_072020.iso -prom-env boot-command=&amp;#39;boot cdrom:\ppc\chrp\bootfile.exe&amp;#39; -display none 进去以后，耐心等待，直到进入安装界面，按照提示进行安装，建议安装上 SSH Server，关掉图形界面，这样安装会比较快。安装需要几十分钟，安装完成后会进入 bootloop，关掉 QEMU。接着，准备好网络：
sudo ip tuntap add tap0 mode tap sudo ip link set tap0 up sudo ip a add 10.0.2.15/24 dev tap0 再启动虚拟机，注意启动选项修改了，并且多了网络的配置：</description>
    </item>
    
    <item>
      <title>Transport Layer Interface 考古</title>
      <link>https://jia.je/networking/2023/02/12/transport-layer-interface/</link>
      <pubDate>Sun, 12 Feb 2023 20:52:00 +0800</pubDate>
      
      <guid>https://jia.je/networking/2023/02/12/transport-layer-interface/</guid>
      <description>Transport Layer Interface 现在网络编程主要采用的是 BSD Sockets API，但实际上当年还有另一套 API，就是 TLI（Transport Layer Interface），后来 BSD Sockets 胜出，进入了 POSIX 标准，TLI 后面也标准化为了 XTI，现在可以在部分 Unix 系统中找到。TLI/XTI 的使用方法和 Sockets API 有些类似，但是比较特别的一点在于，Sockets API 第一步是 socket 调用，传的参数就决定了这是 TCP 还是 UDP 还是其他什么协议，而 TLI 是通过打开不同的设备文件来进行区分：
int fd = t_open(&amp;#34;/dev/udp&amp;#34;, O_RDWR, NULL); 比如 TCP 就是 /dev/tcp，UDP 就是 /dev/udp，同理还有 /dev/icmp 等等。这颇有 Unix 的哲学：everything is a file。而 BSD Sockets API 则是有对应的系统调用，libc 基本不需要做什么事情。
沿着这个思路，既然 TLI 第一步是打开一个文件，难道后面的一系列的 bind、connect、send、recv 等操作也是对文件读写吗？是的！如果我们查看 illumos 的源码，会发现 t_connect 函数的核心实现是：
creq = (struct T_conn_req *)ctlbufp-&amp;gt;buf; creq-&amp;gt;PRIM_type = T_CONN_REQ; creq-&amp;gt;DEST_length = call-&amp;gt;addr.</description>
    </item>
    
  </channel>
</rss>
