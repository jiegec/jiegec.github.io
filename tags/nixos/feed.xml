<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>nixos on 杰哥的{运维,编程,调板子}小笔记</title>
    <link>https://jia.je/tags/nixos/</link>
    <description>Recent content in nixos on 杰哥的{运维,编程,调板子}小笔记</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <lastBuildDate>Tue, 07 Jun 2022 22:29:00 +0800</lastBuildDate><atom:link href="https://jia.je/tags/nixos/feed.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Nix Cookbook</title>
      <link>https://jia.je/software/2022/06/07/nix-cookbook/</link>
      <pubDate>Tue, 07 Jun 2022 22:29:00 +0800</pubDate>
      
      <guid>https://jia.je/software/2022/06/07/nix-cookbook/</guid>
      <description>背景 最近在尝试 NixOS 和在 macOS 上跑 Nix，下面记录一些我在使用过程中遇到的一些小问题和解决思路。
NixOS 全局配置 NixOS 的全局配置路径：/etc/nixos/configuration.nix 和 /etc/nixos/hardware-configuration.nix
应用更新后的全局配置：
nixos-rebuild switch # or nixos-rebuild switch --upgrade 应用 Flakes 配置文件并显示变化：
#!/usr/bin/env python3 import os user = os.getenv(&amp;#34;USER&amp;#34;) home = f&amp;#34;/nix/var/nix/profiles/&amp;#34; old = home + os.readlink(f&amp;#34;{home}system&amp;#34;) os.system(&amp;#34;sudo nixos-rebuild switch --flake .&amp;#34;) new = home + os.readlink(f&amp;#34;{home}system&amp;#34;) os.system(f&amp;#34;nix store diff-closures {old} {new}&amp;#34;) 更新大版本 如果要更新 NixOS 21.11 到 22.05:
nix-channel --list nix-channel --add https://nixos.org/channels/nixos-22.05 nixos nixos-rebuild switch --upgrade 可以考虑改或者不改 /etc/nixos/configuration.</description>
    </item>
    
  </channel>
</rss>
