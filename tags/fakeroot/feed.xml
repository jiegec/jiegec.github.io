<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>fakeroot on 杰哥的{运维,编程,调板子}小笔记</title>
    <link>https://jia.je/tags/fakeroot/</link>
    <description>Recent content in fakeroot on 杰哥的{运维,编程,调板子}小笔记</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <lastBuildDate>Mon, 19 Sep 2022 20:14:00 +0800</lastBuildDate><atom:link href="https://jia.je/tags/fakeroot/feed.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Buildroot 2020.08 的 Fakeroot 版本过旧导致的兼容性问题</title>
      <link>https://jia.je/software/2022/09/19/buildroot-fakeroot-incompat/</link>
      <pubDate>Mon, 19 Sep 2022 20:14:00 +0800</pubDate>
      
      <guid>https://jia.je/software/2022/09/19/buildroot-fakeroot-incompat/</guid>
      <description>背景 最近在给之前的 Buildroot 2020.09 增加新的软件包，结果编译的时候报错：
mknod: ....../dev/console: Operation not permitted 还有一个背景是前段时间把系统升级到了 Ubuntu 22.04 LTS。
研究 跑的时候没有用 root，而是用 fakeroot 跑的，按理说在 fakeroot 里跑 mknod 是不会报错的，我直接运行系统的 fakeroot 是正常的：
fakeroot -- mknod -m 0622 test c 5 1 此时 fakeroot 会生成一个空文件，这是正常现象。那么为什么 Buildroot 里跑就不对了呢？
我仔细观察了一下，buildroot 用的是自己编译的 fakeroot，版本是 1.20.2，用这个版本跑就会报错：
$ ./output/host/bin/fakeroot -- mknod -m 0622 test c 5 1 mknod: test: Operation not permitted 果然就出问题了。
用 strace 观察下区别：
$ fakeroot -- strace mknod -m 0622 test c 5 1 newfstatat(AT_FDCWD, &amp;#34;test&amp;#34;, {st_mode=S_IFREG|0644, st_size=0, .</description>
    </item>
    
  </channel>
</rss>
